var Cl=Object.defineProperty;var Al=(e,t,n)=>t in e?Cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kn=(e,t,n)=>(Al(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ie(){}const Yn=e=>e;function Co(e){return e()}function ai(){return Object.create(null)}function Re(e){e.forEach(Co)}function Zt(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Nl(e){return Object.keys(e).length===0}function ui(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Ao=typeof window<"u";let Pr=Ao?()=>window.performance.now():()=>Date.now(),Yr=Ao?e=>requestAnimationFrame(e):ie;const vt=new Set;function No(e){vt.forEach(t=>{t.c(e)||(vt.delete(t),t.f())}),vt.size!==0&&Yr(No)}function Or(e){let t;return vt.size===0&&Yr(No),{promise:new Promise(n=>{vt.add(t={c:e,f:n})}),abort(){vt.delete(t)}}}function N(e,t){e.appendChild(t)}function Eo(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function El(e){const t=X("style");return t.textContent="/* empty */",Fl(Eo(e),t),t.sheet}function Fl(e,t){return N(e.head||e,t),t.sheet}function z(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function nt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function X(e){return document.createElement(e)}function ue(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ge(e){return document.createTextNode(e)}function ae(){return ge(" ")}function Ut(){return ge("")}function Ue(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ll(e){return Array.from(e.childNodes)}function ye(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ul(e,t){e.value=t??""}function Ke(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function si(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}let en;function Pl(){if(en===void 0){en=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{en=!0}}return en}function Yl(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=X("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Pl();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Ue(window,"message",l=>{l.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{o=Ue(r.contentWindow,"resize",t),t()}),N(e,r),()=>{(i||o&&r.contentWindow)&&o(),I(r)}}function Fo(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const gn=new Map;let dn=0;function Ol(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Hl(e,t){const n={stylesheet:El(t),rules:{}};return gn.set(e,n),n}function mn(e,t,n,r,i,o,l,u=0){const a=16.666/r;let s=`{
`;for(let _=0;_<=1;_+=a){const y=t+(n-t)*o(_);s+=_*100+`%{${l(y,1-y)}}
`}const f=s+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Ol(f)}_${u}`,h=Eo(e),{stylesheet:g,rules:m}=gn.get(h)||Hl(h,e);m[c]||(m[c]=!0,g.insertRule(`@keyframes ${c} ${f}`,g.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${c} ${r}ms linear ${i}ms 1 both`,dn+=1,c}function pn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),dn-=i,dn||Il())}function Il(){Yr(()=>{dn||(gn.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&I(t)}),gn.clear())})}let Xt;function Wt(e){Xt=e}function Hr(){if(!Xt)throw new Error("Function called outside component initialization");return Xt}function On(e){Hr().$$.on_mount.push(e)}function Lo(e){Hr().$$.after_update.push(e)}function Rl(){const e=Hr();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Fo(t,n,{cancelable:r});return i.slice().forEach(l=>{l.call(e,o)}),!o.defaultPrevented}return!0}}const _t=[],Oe=[];let bt=[];const gr=[],zl=Promise.resolve();let dr=!1;function Wl(){dr||(dr=!0,zl.then(Uo))}function Ie(e){bt.push(e)}function qt(e){gr.push(e)}const Jn=new Set;let ht=0;function Uo(){if(ht!==0)return;const e=Xt;do{try{for(;ht<_t.length;){const t=_t[ht];ht++,Wt(t),ql(t.$$)}}catch(t){throw _t.length=0,ht=0,t}for(Wt(null),_t.length=0,ht=0;Oe.length;)Oe.pop()();for(let t=0;t<bt.length;t+=1){const n=bt[t];Jn.has(n)||(Jn.add(n),n())}bt.length=0}while(_t.length);for(;gr.length;)gr.pop()();dr=!1,Jn.clear(),Wt(e)}function ql(e){if(e.fragment!==null){e.update(),Re(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ie)}}function Vl(e){const t=[],n=[];bt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),bt=t}let Pt;function Ir(){return Pt||(Pt=Promise.resolve(),Pt.then(()=>{Pt=null})),Pt}function ot(e,t,n){e.dispatchEvent(Fo(`${t?"intro":"outro"}${n}`))}const an=new Set;let Pe;function kt(){Pe={r:0,c:[],p:Pe}}function Mt(){Pe.r||Re(Pe.c),Pe=Pe.p}function oe(e,t){e&&e.i&&(an.delete(e),e.i(t))}function fe(e,t,n,r){if(e&&e.o){if(an.has(e))return;an.add(e),Pe.c.push(()=>{an.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Rr={duration:0};function Xl(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,l,u,a=0;function s(){l&&pn(e,l)}function f(){const{delay:h=0,duration:g=300,easing:m=Yn,tick:p=ie,css:_}=i||Rr;_&&(l=mn(e,0,1,g,h,m,_,a++)),p(0,1);const y=Pr()+h,v=y+g;u&&u.abort(),o=!0,Ie(()=>ot(e,!0,"start")),u=Or(w=>{if(o){if(w>=v)return p(1,0),ot(e,!0,"end"),s(),o=!1;if(w>=y){const x=m((w-y)/g);p(x,1-x)}}return o})}let c=!1;return{start(){c||(c=!0,pn(e),Zt(i)?(i=i(r),Ir().then(f)):f())},invalidate(){c=!1},end(){o&&(s(),o=!1)}}}function Bl(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,l;const u=Pe;u.r+=1;let a;function s(){const{delay:f=0,duration:c=300,easing:h=Yn,tick:g=ie,css:m}=i||Rr;m&&(l=mn(e,1,0,c,f,h,m));const p=Pr()+f,_=p+c;Ie(()=>ot(e,!1,"start")),"inert"in e&&(a=e.inert,e.inert=!0),Or(y=>{if(o){if(y>=_)return g(0,1),ot(e,!1,"end"),--u.r||Re(u.c),!1;if(y>=p){const v=h((y-p)/c);g(1-v,v)}}return o})}return Zt(i)?Ir().then(()=>{i=i(r),s()}):s(),{end(f){f&&"inert"in e&&(e.inert=a),f&&i.tick&&i.tick(1,0),o&&(l&&pn(e,l),o=!1)}}}function _n(e,t,n,r){let o=t(e,n,{direction:"both"}),l=r?0:1,u=null,a=null,s=null,f;function c(){s&&pn(e,s)}function h(m,p){const _=m.b-l;return p*=Math.abs(_),{a:l,b:m.b,d:_,duration:p,start:m.start,end:m.start+p,group:m.group}}function g(m){const{delay:p=0,duration:_=300,easing:y=Yn,tick:v=ie,css:w}=o||Rr,x={start:Pr()+p,b:m};m||(x.group=Pe,Pe.r+=1),"inert"in e&&(m?f!==void 0&&(e.inert=f):(f=e.inert,e.inert=!0)),u||a?a=x:(w&&(c(),s=mn(e,l,m,_,p,y,w)),m&&v(0,1),u=h(x,_),Ie(()=>ot(e,m,"start")),Or(S=>{if(a&&S>a.start&&(u=h(a,_),a=null,ot(e,u.b,"start"),w&&(c(),s=mn(e,l,u.b,u.duration,0,y,o.css))),u){if(S>=u.end)v(l=u.b,1-l),ot(e,u.b,"end"),a||(u.b?c():--u.group.r||Re(u.group.c)),u=null;else if(S>=u.start){const k=S-u.start;l=u.a+u.d*y(k/u.duration),v(l,1-l)}}return!!(u||a)}))}return{run(m){Zt(o)?Ir().then(()=>{o=o({direction:m?"in":"out"}),g(m)}):g(m)},end(){c(),u=a=null}}}function be(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Vt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function xe(e){e&&e.c()}function ke(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Ie(()=>{const o=e.$$.on_mount.map(Co).filter(Zt);e.$$.on_destroy?e.$$.on_destroy.push(...o):Re(o),e.$$.on_mount=[]}),i.forEach(Ie)}function Me(e,t){const n=e.$$;n.fragment!==null&&(Vl(n.after_update),Re(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Gl(e,t){e.$$.dirty[0]===-1&&(_t.push(e),Wl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(e,t,n,r,i,o,l=null,u=[-1]){const a=Xt;Wt(e);const s=e.$$={fragment:null,ctx:[],props:o,update:ie,not_equal:i,bound:ai(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:ai(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};l&&l(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(c,h,...g)=>{const m=g.length?g[0]:h;return s.ctx&&i(s.ctx[c],s.ctx[c]=m)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](m),f&&Gl(e,c)),h}):[],s.update(),f=!0,Re(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const c=Ll(t.target);s.fragment&&s.fragment.l(c),c.forEach(I)}else s.fragment&&s.fragment.c();t.intro&&oe(e.$$.fragment),ke(e,t.target,t.anchor),Uo()}Wt(a)}class je{constructor(){Kn(this,"$$");Kn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=ie}$on(t,n){if(!Zt(n))return ie;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Nl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Kl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);function un(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zr(e){let t,n,r;e.length!==2?(t=un,n=(u,a)=>un(e(u),a),r=(u,a)=>e(u)-a):(t=e===un||e===Jl?e:Zl,n=e,r=e);function i(u,a,s=0,f=u.length){if(s<f){if(t(a,a)!==0)return f;do{const c=s+f>>>1;n(u[c],a)<0?s=c+1:f=c}while(s<f)}return s}function o(u,a,s=0,f=u.length){if(s<f){if(t(a,a)!==0)return f;do{const c=s+f>>>1;n(u[c],a)<=0?s=c+1:f=c}while(s<f)}return s}function l(u,a,s=0,f=u.length){const c=i(u,a,s,f-1);return c>s&&r(u[c-1],a)>-r(u[c],a)?c-1:c}return{left:i,center:l,right:o}}function Zl(){return 0}function Ql(e){return e===null?NaN:+e}const $l=zr(un),jl=$l.right;zr(Ql).center;const ea=jl;function ta(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class mr extends Map{constructor(t,n=ia){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(fi(this,t))}has(t){return super.has(fi(this,t))}set(t,n){return super.set(na(this,t),n)}delete(t){return super.delete(ra(this,t))}}function fi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function na({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ra({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ia(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oa(e){return e}function la(e,...t){return aa(e,Array.from,oa,t)}function aa(e,t,n,r){return function i(o,l){if(l>=r.length)return n(o);const u=new mr,a=r[l++];let s=-1;for(const f of o){const c=a(f,++s,o),h=u.get(c);h?h.push(f):u.set(c,[f])}for(const[f,c]of u)u.set(f,i(c,l));return t(u)}(e,0)}const ua=Math.sqrt(50),sa=Math.sqrt(10),fa=Math.sqrt(2);function yn(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=ua?10:o>=sa?5:o>=fa?2:1;let u,a,s;return i<0?(s=Math.pow(10,-i)/l,u=Math.round(e*s),a=Math.round(t*s),u/s<e&&++u,a/s>t&&--a,s=-s):(s=Math.pow(10,i)*l,u=Math.round(e/s),a=Math.round(t/s),u*s<e&&++u,a*s>t&&--a),a<u&&.5<=n&&n<2?yn(e,t,n*2):[u,a,s]}function ca(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?yn(t,e,n):yn(e,t,n);if(!(o>=i))return[];const u=o-i+1,a=new Array(u);if(r)if(l<0)for(let s=0;s<u;++s)a[s]=(o-s)/-l;else for(let s=0;s<u;++s)a[s]=(o-s)*l;else if(l<0)for(let s=0;s<u;++s)a[s]=(i+s)/-l;else for(let s=0;s<u;++s)a[s]=(i+s)*l;return a}function pr(e,t,n){return t=+t,e=+e,n=+n,yn(e,t,n)[2]}function _r(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?pr(t,e,n):pr(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function yr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ci(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Wr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const hi=Symbol("implicit");function Po(){var e=new mr,t=[],n=[],r=hi;function i(o){let l=e.get(o);if(l===void 0){if(r!==hi)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new mr;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Po(t,n).unknown(r)},Wr.apply(i,arguments),i}function qr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qt(){}var Bt=.7,wn=1/Bt,Dt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ha=/^#([0-9a-f]{3,8})$/,ga=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),da=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),ma=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${Gt}\\)$`),pa=new RegExp(`^rgba\\(${He},${He},${He},${Gt}\\)$`),_a=new RegExp(`^hsl\\(${Gt},${He},${He}\\)$`),ya=new RegExp(`^hsla\\(${Gt},${He},${He},${Gt}\\)$`),gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qr(Qt,at,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:di,formatHex:di,formatHex8:wa,formatHsl:va,formatRgb:mi,toString:mi});function di(){return this.rgb().formatHex()}function wa(){return this.rgb().formatHex8()}function va(){return Oo(this).formatHsl()}function mi(){return this.rgb().formatRgb()}function at(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ha.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pi(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?tn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?tn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ga.exec(e))?new De(t[1],t[2],t[3],1):(t=da.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ma.exec(e))?tn(t[1],t[2],t[3],t[4]):(t=pa.exec(e))?tn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_a.exec(e))?wi(t[1],t[2]/100,t[3]/100,1):(t=ya.exec(e))?wi(t[1],t[2]/100,t[3]/100,t[4]):gi.hasOwnProperty(e)?pi(gi[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function pi(e){return new De(e>>16&255,e>>8&255,e&255,1)}function tn(e,t,n,r){return r<=0&&(e=t=n=NaN),new De(e,t,n,r)}function ba(e){return e instanceof Qt||(e=at(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function wr(e,t,n,r){return arguments.length===1?ba(e):new De(e,t,n,r??1)}function De(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qr(De,wr,Yo(Qt,{brighter(e){return e=e==null?wn:Math.pow(wn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bt:Math.pow(Bt,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(lt(this.r),lt(this.g),lt(this.b),vn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_i,formatHex:_i,formatHex8:ka,formatRgb:yi,toString:yi}));function _i(){return`#${it(this.r)}${it(this.g)}${it(this.b)}`}function ka(){return`#${it(this.r)}${it(this.g)}${it(this.b)}${it((isNaN(this.opacity)?1:this.opacity)*255)}`}function yi(){const e=vn(this.opacity);return`${e===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${e===1?")":`, ${e})`}`}function vn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function it(e){return e=lt(e),(e<16?"0":"")+e.toString(16)}function wi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,r)}function Oo(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof Qt||(e=at(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,u=o-i,a=(o+i)/2;return u?(t===o?l=(n-r)/u+(n<r)*6:n===o?l=(r-t)/u+2:l=(t-n)/u+4,u/=a<.5?o+i:2-o-i,l*=60):u=a>0&&a<1?0:l,new Fe(l,u,a,e.opacity)}function Ma(e,t,n,r){return arguments.length===1?Oo(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qr(Fe,Ma,Yo(Qt,{brighter(e){return e=e==null?wn:Math.pow(wn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bt:Math.pow(Bt,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new De(Zn(e>=240?e-240:e+120,i,r),Zn(e,i,r),Zn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fe(vi(this.h),nn(this.s),nn(this.l),vn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vn(this.opacity);return`${e===1?"hsl(":"hsla("}${vi(this.h)}, ${nn(this.s)*100}%, ${nn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vi(e){return e=(e||0)%360,e<0?e+360:e}function nn(e){return Math.max(0,Math.min(1,e||0))}function Zn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vr=e=>()=>e;function Da(e,t){return function(n){return e+n*t}}function xa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Sa(e){return(e=+e)==1?Ho:function(t,n){return n-t?xa(t,n,e):Vr(isNaN(t)?n:t)}}function Ho(e,t){var n=t-e;return n?Da(e,n):Vr(isNaN(e)?t:e)}const bn=function e(t){var n=Sa(t);function r(i,o){var l=n((i=wr(i)).r,(o=wr(o)).r),u=n(i.g,o.g),a=n(i.b,o.b),s=Ho(i.opacity,o.opacity);return function(f){return i.r=l(f),i.g=u(f),i.b=a(f),i.opacity=s(f),i+""}}return r.gamma=e,r}(1);function Ta(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Ca(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Aa(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=Hn(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(u){for(l=0;l<r;++l)o[l]=i[l](u);return o}}function Na(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ea(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Hn(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qn=new RegExp(vr.source,"g");function Fa(e){return function(){return e}}function La(e){return function(t){return e(t)+""}}function Io(e,t){var n=vr.lastIndex=Qn.lastIndex=0,r,i,o,l=-1,u=[],a=[];for(e=e+"",t=t+"";(r=vr.exec(e))&&(i=Qn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),u[l]?u[l]+=o:u[++l]=o),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,a.push({i:l,x:Ee(r,i)})),n=Qn.lastIndex;return n<t.length&&(o=t.slice(n),u[l]?u[l]+=o:u[++l]=o),u.length<2?a[0]?La(a[0].x):Fa(t):(t=a.length,function(s){for(var f=0,c;f<t;++f)u[(c=a[f]).i]=c.x(s);return u.join("")})}function Hn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Vr(t):(n==="number"?Ee:n==="string"?(r=at(t))?(t=r,bn):Io:t instanceof at?bn:t instanceof Date?Na:Ca(t)?Ta:Array.isArray(t)?Aa:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ea:Ee)(e,t)}function Ua(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var bi=180/Math.PI,br={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ro(e,t,n,r,i,o){var l,u,a;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,a/=u),e*r<t*n&&(e=-e,t=-t,a=-a,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*bi,skewX:Math.atan(a)*bi,scaleX:l,scaleY:u}}var rn;function Pa(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?br:Ro(t.a,t.b,t.c,t.d,t.e,t.f)}function Ya(e){return e==null||(rn||(rn=document.createElementNS("http://www.w3.org/2000/svg","g")),rn.setAttribute("transform",e),!(e=rn.transform.baseVal.consolidate()))?br:(e=e.matrix,Ro(e.a,e.b,e.c,e.d,e.e,e.f))}function zo(e,t,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,f,c,h,g,m){if(s!==c||f!==h){var p=g.push("translate(",null,t,null,n);m.push({i:p-4,x:Ee(s,c)},{i:p-2,x:Ee(f,h)})}else(c||h)&&g.push("translate("+c+t+h+n)}function l(s,f,c,h){s!==f?(s-f>180?f+=360:f-s>180&&(s+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Ee(s,f)})):f&&c.push(i(c)+"rotate("+f+r)}function u(s,f,c,h){s!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Ee(s,f)}):f&&c.push(i(c)+"skewX("+f+r)}function a(s,f,c,h,g,m){if(s!==c||f!==h){var p=g.push(i(g)+"scale(",null,",",null,")");m.push({i:p-4,x:Ee(s,c)},{i:p-2,x:Ee(f,h)})}else(c!==1||h!==1)&&g.push(i(g)+"scale("+c+","+h+")")}return function(s,f){var c=[],h=[];return s=e(s),f=e(f),o(s.translateX,s.translateY,f.translateX,f.translateY,c,h),l(s.rotate,f.rotate,c,h),u(s.skewX,f.skewX,c,h),a(s.scaleX,s.scaleY,f.scaleX,f.scaleY,c,h),s=f=null,function(g){for(var m=-1,p=h.length,_;++m<p;)c[(_=h[m]).i]=_.x(g);return c.join("")}}}var Oa=zo(Pa,"px, ","px)","deg)"),Ha=zo(Ya,", ",")",")");function Ia(e){return function(){return e}}function Ra(e){return+e}var ki=[0,1];function yt(e){return e}function kr(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ia(isNaN(t)?NaN:.5)}function za(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Wa(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=kr(i,r),o=n(l,o)):(r=kr(r,i),o=n(o,l)),function(u){return o(r(u))}}function qa(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=kr(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(u){var a=ea(e,u,1,r)-1;return o[a](i[a](u))}}function Wo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Va(){var e=ki,t=ki,n=Hn,r,i,o,l=yt,u,a,s;function f(){var h=Math.min(e.length,t.length);return l!==yt&&(l=za(e[0],e[h-1])),u=h>2?qa:Wa,a=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(a||(a=u(e.map(r),t,n)))(r(l(h)))}return c.invert=function(h){return l(i((s||(s=u(t,e.map(r),Ee)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,Ra),f()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=Ua,f()},c.clamp=function(h){return arguments.length?(l=h?!0:yt,f()):l!==yt},c.interpolate=function(h){return arguments.length?(n=h,f()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,g){return r=h,i=g,f()}}function qo(){return Va()(yt,yt)}function Xa(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function St(e){return e=kn(Math.abs(e)),e?e[1]:NaN}function Ba(e,t){return function(n,r){for(var i=n.length,o=[],l=0,u=e[0],a=0;i>0&&u>0&&(a+u+1>r&&(u=Math.max(1,r-a)),o.push(n.substring(i-=u,i+u)),!((a+=u+1)>r));)u=e[l=(l+1)%e.length];return o.reverse().join(t)}}function Ga(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ka=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mn(e){if(!(t=Ka.exec(e)))throw new Error("invalid format: "+e);var t;return new Xr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mn.prototype=Xr.prototype;function Xr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ja(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Vo;function Za(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Vo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+kn(e,Math.max(0,t+o-1))[0]}function Mi(e,t){var n=kn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Di={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xa,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Mi(e*100,t),r:Mi,s:Za,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xi(e){return e}var Si=Array.prototype.map,Ti=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qa(e){var t=e.grouping===void 0||e.thousands===void 0?xi:Ba(Si.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?xi:Ga(Si.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function s(c){c=Mn(c);var h=c.fill,g=c.align,m=c.sign,p=c.symbol,_=c.zero,y=c.width,v=c.comma,w=c.precision,x=c.trim,S=c.type;S==="n"?(v=!0,S="g"):Di[S]||(w===void 0&&(w=12),x=!0,S="g"),(_||h==="0"&&g==="=")&&(_=!0,h="0",g="=");var k=p==="$"?n:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",T=p==="$"?r:/[%p]/.test(S)?l:"",O=Di[S],W=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(D){var H=k,U=T,B,q,b;if(S==="c")U=O(D)+U,D="";else{D=+D;var C=D<0||1/D<0;if(D=isNaN(D)?a:O(Math.abs(D),w),x&&(D=Ja(D)),C&&+D==0&&m!=="+"&&(C=!1),H=(C?m==="("?m:u:m==="-"||m==="("?"":m)+H,U=(S==="s"?Ti[8+Vo/3]:"")+U+(C&&m==="("?")":""),W){for(B=-1,q=D.length;++B<q;)if(b=D.charCodeAt(B),48>b||b>57){U=(b===46?i+D.slice(B+1):D.slice(B))+U,D=D.slice(0,B);break}}}v&&!_&&(D=t(D,1/0));var V=H.length+D.length+U.length,K=V<y?new Array(y-V+1).join(h):"";switch(v&&_&&(D=t(K+D,K.length?y-U.length:1/0),K=""),g){case"<":D=H+D+U+K;break;case"=":D=H+K+D+U;break;case"^":D=K.slice(0,V=K.length>>1)+H+D+U+K.slice(V);break;default:D=K+H+D+U;break}return o(D)}return F.toString=function(){return c+""},F}function f(c,h){var g=s((c=Mn(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(St(h)/3)))*3,p=Math.pow(10,-m),_=Ti[8+m/3];return function(y){return g(p*y)+_}}return{format:s,formatPrefix:f}}var on,Xo,Bo;$a({thousands:",",grouping:[3],currency:["$",""]});function $a(e){return on=Qa(e),Xo=on.format,Bo=on.formatPrefix,on}function ja(e){return Math.max(0,-St(Math.abs(e)))}function eu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(St(t)/3)))*3-St(Math.abs(e)))}function tu(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,St(t)-St(e))+1}function nu(e,t,n,r){var i=_r(e,t,n),o;switch(r=Mn(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=eu(i,l))&&(r.precision=o),Bo(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=tu(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ja(i))&&(r.precision=o-(r.type==="%")*2);break}}return Xo(r)}function ru(e){var t=e.domain;return e.ticks=function(n){var r=t();return ca(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return nu(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],u=r[o],a,s,f=10;for(u<l&&(s=l,l=u,u=s,s=i,i=o,o=s);f-- >0;){if(s=pr(l,u,n),s===a)return r[i]=l,r[o]=u,t(r);if(s>0)l=Math.floor(l/s)*s,u=Math.ceil(u/s)*s;else if(s<0)l=Math.ceil(l*s)/s,u=Math.floor(u*s)/s;else break;a=s}return e},e}function Dn(){var e=qo();return e.copy=function(){return Wo(e,Dn())},Wr.apply(e,arguments),ru(e)}function iu(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}const $n=new Date,jn=new Date;function me(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),u=i.ceil(o);return o-l<u-o?l:u},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,u)=>{const a=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<l)||!(u>0))return a;let s;do a.push(s=new Date(+o)),t(o,u),e(o);while(s<o&&o<l);return a},i.filter=o=>me(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!o(l););else for(;--u>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>($n.setTime(+o),jn.setTime(+l),e($n),e(jn),Math.floor(n($n,jn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const xn=me(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xn.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?me(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xn);xn.range;const Be=1e3,Ae=Be*60,Ge=Ae*60,Je=Ge*24,Br=Je*7,Ci=Je*30,er=Je*365,wt=me(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getUTCSeconds());wt.range;const Gr=me(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Be)},(e,t)=>{e.setTime(+e+t*Ae)},(e,t)=>(t-e)/Ae,e=>e.getMinutes());Gr.range;const ou=me(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ae)},(e,t)=>(t-e)/Ae,e=>e.getUTCMinutes());ou.range;const In=me(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Be-e.getMinutes()*Ae)},(e,t)=>{e.setTime(+e+t*Ge)},(e,t)=>(t-e)/Ge,e=>e.getHours());In.range;const lu=me(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ge)},(e,t)=>(t-e)/Ge,e=>e.getUTCHours());lu.range;const tt=me(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ae)/Je,e=>e.getDate()-1);tt.range;const Kr=me(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Je,e=>e.getUTCDate()-1);Kr.range;const au=me(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Je,e=>Math.floor(e/Je));au.range;function ft(e){return me(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ae)/Br)}const Tt=ft(0),Sn=ft(1),uu=ft(2),su=ft(3),Ct=ft(4),fu=ft(5),cu=ft(6);Tt.range;Sn.range;uu.range;su.range;Ct.range;fu.range;cu.range;function ct(e){return me(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Br)}const Go=ct(0),Tn=ct(1),hu=ct(2),gu=ct(3),At=ct(4),du=ct(5),mu=ct(6);Go.range;Tn.range;hu.range;gu.range;At.range;du.range;mu.range;const xt=me(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());xt.range;const pu=me(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());pu.range;const Ze=me(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ze.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:me(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ze.range;const ut=me(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ut.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:me(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ut.range;function _u(e,t,n,r,i,o){const l=[[wt,1,Be],[wt,5,5*Be],[wt,15,15*Be],[wt,30,30*Be],[o,1,Ae],[o,5,5*Ae],[o,15,15*Ae],[o,30,30*Ae],[i,1,Ge],[i,3,3*Ge],[i,6,6*Ge],[i,12,12*Ge],[r,1,Je],[r,2,2*Je],[n,1,Br],[t,1,Ci],[t,3,3*Ci],[e,1,er]];function u(s,f,c){const h=f<s;h&&([s,f]=[f,s]);const g=c&&typeof c.range=="function"?c:a(s,f,c),m=g?g.range(s,+f+1):[];return h?m.reverse():m}function a(s,f,c){const h=Math.abs(f-s)/c,g=zr(([,,_])=>_).right(l,h);if(g===l.length)return e.every(_r(s/er,f/er,c));if(g===0)return xn.every(Math.max(_r(s,f,c),1));const[m,p]=l[h/l[g-1][2]<l[g][2]/h?g-1:g];return m.every(p)}return[u,a]}const[yu,wu]=_u(Ze,xt,Tt,tt,In,Gr);function tr(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function nr(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Yt(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vu(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,u=e.months,a=e.shortMonths,s=Ot(i),f=Ht(i),c=Ot(o),h=Ht(o),g=Ot(l),m=Ht(l),p=Ot(u),_=Ht(u),y=Ot(a),v=Ht(a),w={a:C,A:V,b:K,B:ne,c:null,d:Ui,e:Ui,f:qu,g:ju,G:ts,H:Ru,I:zu,j:Wu,L:Ko,m:Vu,M:Xu,p:Z,q:P,Q:Oi,s:Hi,S:Bu,u:Gu,U:Ku,V:Ju,w:Zu,W:Qu,x:null,X:null,y:$u,Y:es,Z:ns,"%":Yi},x={a:E,A:j,b:re,B:ce,c:null,d:Pi,e:Pi,f:ls,g:ps,G:ys,H:rs,I:is,j:os,L:Zo,m:as,M:us,p:$,q:pe,Q:Oi,s:Hi,S:ss,u:fs,U:cs,V:hs,w:gs,W:ds,x:null,X:null,y:ms,Y:_s,Z:ws,"%":Yi},S={a:F,A:D,b:H,B:U,c:B,d:Fi,e:Fi,f:Yu,g:Ei,G:Ni,H:Li,I:Li,j:Fu,L:Pu,m:Eu,M:Lu,p:W,q:Nu,Q:Hu,s:Iu,S:Uu,u:xu,U:Su,V:Tu,w:Du,W:Cu,x:q,X:b,y:Ei,Y:Ni,Z:Au,"%":Ou};w.x=k(n,w),w.X=k(r,w),w.c=k(t,w),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x);function k(A,Y){return function(J){var M=[],G=-1,Q=0,se=A.length,de,R,ee;for(J instanceof Date||(J=new Date(+J));++G<se;)A.charCodeAt(G)===37&&(M.push(A.slice(Q,G)),(R=Ai[de=A.charAt(++G)])!=null?de=A.charAt(++G):R=de==="e"?" ":"0",(ee=Y[de])&&(de=ee(J,R)),M.push(de),Q=G+1);return M.push(A.slice(Q,G)),M.join("")}}function T(A,Y){return function(J){var M=Yt(1900,void 0,1),G=O(M,A,J+="",0),Q,se;if(G!=J.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(Y&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(Q=nr(Yt(M.y,0,1)),se=Q.getUTCDay(),Q=se>4||se===0?Tn.ceil(Q):Tn(Q),Q=Kr.offset(Q,(M.V-1)*7),M.y=Q.getUTCFullYear(),M.m=Q.getUTCMonth(),M.d=Q.getUTCDate()+(M.w+6)%7):(Q=tr(Yt(M.y,0,1)),se=Q.getDay(),Q=se>4||se===0?Sn.ceil(Q):Sn(Q),Q=tt.offset(Q,(M.V-1)*7),M.y=Q.getFullYear(),M.m=Q.getMonth(),M.d=Q.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),se="Z"in M?nr(Yt(M.y,0,1)).getUTCDay():tr(Yt(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(se+5)%7:M.w+M.U*7-(se+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,nr(M)):tr(M)}}function O(A,Y,J,M){for(var G=0,Q=Y.length,se=J.length,de,R;G<Q;){if(M>=se)return-1;if(de=Y.charCodeAt(G++),de===37){if(de=Y.charAt(G++),R=S[de in Ai?Y.charAt(G++):de],!R||(M=R(A,J,M))<0)return-1}else if(de!=J.charCodeAt(M++))return-1}return M}function W(A,Y,J){var M=s.exec(Y.slice(J));return M?(A.p=f.get(M[0].toLowerCase()),J+M[0].length):-1}function F(A,Y,J){var M=g.exec(Y.slice(J));return M?(A.w=m.get(M[0].toLowerCase()),J+M[0].length):-1}function D(A,Y,J){var M=c.exec(Y.slice(J));return M?(A.w=h.get(M[0].toLowerCase()),J+M[0].length):-1}function H(A,Y,J){var M=y.exec(Y.slice(J));return M?(A.m=v.get(M[0].toLowerCase()),J+M[0].length):-1}function U(A,Y,J){var M=p.exec(Y.slice(J));return M?(A.m=_.get(M[0].toLowerCase()),J+M[0].length):-1}function B(A,Y,J){return O(A,t,Y,J)}function q(A,Y,J){return O(A,n,Y,J)}function b(A,Y,J){return O(A,r,Y,J)}function C(A){return l[A.getDay()]}function V(A){return o[A.getDay()]}function K(A){return a[A.getMonth()]}function ne(A){return u[A.getMonth()]}function Z(A){return i[+(A.getHours()>=12)]}function P(A){return 1+~~(A.getMonth()/3)}function E(A){return l[A.getUTCDay()]}function j(A){return o[A.getUTCDay()]}function re(A){return a[A.getUTCMonth()]}function ce(A){return u[A.getUTCMonth()]}function $(A){return i[+(A.getUTCHours()>=12)]}function pe(A){return 1+~~(A.getUTCMonth()/3)}return{format:function(A){var Y=k(A+="",w);return Y.toString=function(){return A},Y},parse:function(A){var Y=T(A+="",!1);return Y.toString=function(){return A},Y},utcFormat:function(A){var Y=k(A+="",x);return Y.toString=function(){return A},Y},utcParse:function(A){var Y=T(A+="",!0);return Y.toString=function(){return A},Y}}}var Ai={"-":"",_:" ",0:"0"},_e=/^\s*\d+/,bu=/^%/,ku=/[\\^$*+?|[\]().{}]/g;function te(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Mu(e){return e.replace(ku,"\\$&")}function Ot(e){return new RegExp("^(?:"+e.map(Mu).join("|")+")","i")}function Ht(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Du(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function xu(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Su(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Tu(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Cu(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ni(e,t,n){var r=_e.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ei(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Au(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Nu(e,t,n){var r=_e.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Eu(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Fi(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Fu(e,t,n){var r=_e.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Li(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Lu(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Uu(e,t,n){var r=_e.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pu(e,t,n){var r=_e.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Yu(e,t,n){var r=_e.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ou(e,t,n){var r=bu.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Hu(e,t,n){var r=_e.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Iu(e,t,n){var r=_e.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ui(e,t){return te(e.getDate(),t,2)}function Ru(e,t){return te(e.getHours(),t,2)}function zu(e,t){return te(e.getHours()%12||12,t,2)}function Wu(e,t){return te(1+tt.count(Ze(e),e),t,3)}function Ko(e,t){return te(e.getMilliseconds(),t,3)}function qu(e,t){return Ko(e,t)+"000"}function Vu(e,t){return te(e.getMonth()+1,t,2)}function Xu(e,t){return te(e.getMinutes(),t,2)}function Bu(e,t){return te(e.getSeconds(),t,2)}function Gu(e){var t=e.getDay();return t===0?7:t}function Ku(e,t){return te(Tt.count(Ze(e)-1,e),t,2)}function Jo(e){var t=e.getDay();return t>=4||t===0?Ct(e):Ct.ceil(e)}function Ju(e,t){return e=Jo(e),te(Ct.count(Ze(e),e)+(Ze(e).getDay()===4),t,2)}function Zu(e){return e.getDay()}function Qu(e,t){return te(Sn.count(Ze(e)-1,e),t,2)}function $u(e,t){return te(e.getFullYear()%100,t,2)}function ju(e,t){return e=Jo(e),te(e.getFullYear()%100,t,2)}function es(e,t){return te(e.getFullYear()%1e4,t,4)}function ts(e,t){var n=e.getDay();return e=n>=4||n===0?Ct(e):Ct.ceil(e),te(e.getFullYear()%1e4,t,4)}function ns(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+te(t/60|0,"0",2)+te(t%60,"0",2)}function Pi(e,t){return te(e.getUTCDate(),t,2)}function rs(e,t){return te(e.getUTCHours(),t,2)}function is(e,t){return te(e.getUTCHours()%12||12,t,2)}function os(e,t){return te(1+Kr.count(ut(e),e),t,3)}function Zo(e,t){return te(e.getUTCMilliseconds(),t,3)}function ls(e,t){return Zo(e,t)+"000"}function as(e,t){return te(e.getUTCMonth()+1,t,2)}function us(e,t){return te(e.getUTCMinutes(),t,2)}function ss(e,t){return te(e.getUTCSeconds(),t,2)}function fs(e){var t=e.getUTCDay();return t===0?7:t}function cs(e,t){return te(Go.count(ut(e)-1,e),t,2)}function Qo(e){var t=e.getUTCDay();return t>=4||t===0?At(e):At.ceil(e)}function hs(e,t){return e=Qo(e),te(At.count(ut(e),e)+(ut(e).getUTCDay()===4),t,2)}function gs(e){return e.getUTCDay()}function ds(e,t){return te(Tn.count(ut(e)-1,e),t,2)}function ms(e,t){return te(e.getUTCFullYear()%100,t,2)}function ps(e,t){return e=Qo(e),te(e.getUTCFullYear()%100,t,2)}function _s(e,t){return te(e.getUTCFullYear()%1e4,t,4)}function ys(e,t){var n=e.getUTCDay();return e=n>=4||n===0?At(e):At.ceil(e),te(e.getUTCFullYear()%1e4,t,4)}function ws(){return"+0000"}function Yi(){return"%"}function Oi(e){return+e}function Hi(e){return Math.floor(+e/1e3)}var gt,Jr;vs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vs(e){return gt=vu(e),Jr=gt.format,gt.parse,gt.utcFormat,gt.utcParse,gt}function bs(e){return new Date(e)}function ks(e){return e instanceof Date?+e:+new Date(+e)}function $o(e,t,n,r,i,o,l,u,a,s){var f=qo(),c=f.invert,h=f.domain,g=s(".%L"),m=s(":%S"),p=s("%I:%M"),_=s("%I %p"),y=s("%a %d"),v=s("%b %d"),w=s("%B"),x=s("%Y");function S(k){return(a(k)<k?g:u(k)<k?m:l(k)<k?p:o(k)<k?_:r(k)<k?i(k)<k?y:v:n(k)<k?w:x)(k)}return f.invert=function(k){return new Date(c(k))},f.domain=function(k){return arguments.length?h(Array.from(k,ks)):h().map(bs)},f.ticks=function(k){var T=h();return e(T[0],T[T.length-1],k??10)},f.tickFormat=function(k,T){return T==null?S:s(T)},f.nice=function(k){var T=h();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?h(iu(T,k)):f},f.copy=function(){return Wo(f,$o(e,t,n,r,i,o,l,u,a,s))},f}function Zr(){return Wr.apply($o(yu,wu,Ze,xt,Tt,tt,In,Gr,wt,Jr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function he(e){return function(){return e}}const Mr=Math.PI,Dr=2*Mr,rt=1e-6,Ms=Dr-rt;function jo(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ds(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jo;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class xs{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jo:Ds(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,u=this._y1,a=r-t,s=i-n,f=l-t,c=u-n,h=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>rt)if(!(Math.abs(c*a-s*f)>rt)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-l,m=i-u,p=a*a+s*s,_=g*g+m*m,y=Math.sqrt(p),v=Math.sqrt(h),w=o*Math.tan((Mr-Math.acos((p+h-_)/(2*y*v)))/2),x=w/v,S=w/y;Math.abs(x-1)>rt&&this._append`L${t+x*f},${n+x*c}`,this._append`A${o},${o},0,0,${+(c*g>f*m)},${this._x1=t+S*a},${this._y1=n+S*s}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),a=r*Math.sin(i),s=t+u,f=n+a,c=1^l,h=l?i-o:o-i;this._x1===null?this._append`M${s},${f}`:(Math.abs(this._x1-s)>rt||Math.abs(this._y1-f)>rt)&&this._append`L${s},${f}`,r&&(h<0&&(h=h%Dr+Dr),h>Ms?this._append`A${r},${r},0,1,${c},${t-u},${n-a}A${r},${r},0,1,${c},${this._x1=s},${this._y1=f}`:h>rt&&this._append`A${r},${r},0,${+(h>=Mr)},${c},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function el(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new xs(t)}function Qr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tl(e){this._context=e}tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nl(e){return new tl(e)}function rl(e){return e[0]}function il(e){return e[1]}function Cn(e,t){var n=he(!0),r=null,i=nl,o=null,l=el(u);e=typeof e=="function"?e:e===void 0?rl:he(e),t=typeof t=="function"?t:t===void 0?il:he(t);function u(a){var s,f=(a=Qr(a)).length,c,h=!1,g;for(r==null&&(o=i(g=l())),s=0;s<=f;++s)!(s<f&&n(c=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,s,a),+t(c,s,a));if(g)return o=null,g+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:he(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:he(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:he(!!a),u):n},u.curve=function(a){return arguments.length?(i=a,r!=null&&(o=i(r)),u):i},u.context=function(a){return arguments.length?(a==null?r=o=null:o=i(r=a),u):r},u}function Ss(e,t,n){var r=null,i=he(!0),o=null,l=nl,u=null,a=el(s);e=typeof e=="function"?e:e===void 0?rl:he(+e),t=typeof t=="function"?t:he(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?il:he(+n);function s(c){var h,g,m,p=(c=Qr(c)).length,_,y=!1,v,w=new Array(p),x=new Array(p);for(o==null&&(u=l(v=a())),h=0;h<=p;++h){if(!(h<p&&i(_=c[h],h,c))===y)if(y=!y)g=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=g;--m)u.point(w[m],x[m]);u.lineEnd(),u.areaEnd()}y&&(w[h]=+e(_,h,c),x[h]=+t(_,h,c),u.point(r?+r(_,h,c):w[h],n?+n(_,h,c):x[h]))}if(v)return u=null,v+""||null}function f(){return Cn().defined(i).curve(l).context(o)}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),r=null,s):e},s.x0=function(c){return arguments.length?(e=typeof c=="function"?c:he(+c),s):e},s.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:he(+c),s):r},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),n=null,s):t},s.y0=function(c){return arguments.length?(t=typeof c=="function"?c:he(+c),s):t},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:he(+c),s):n},s.lineX0=s.lineY0=function(){return f().x(e).y(t)},s.lineY1=function(){return f().x(e).y(n)},s.lineX1=function(){return f().x(r).y(t)},s.defined=function(c){return arguments.length?(i=typeof c=="function"?c:he(!!c),s):i},s.curve=function(c){return arguments.length?(l=c,o!=null&&(u=l(o)),s):l},s.context=function(c){return arguments.length?(c==null?o=u=null:u=l(o=c),s):o},s}function Ii(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,u=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ri(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Ts(e,t){return e[t]}function Cs(e){const t=[];return t.key=e,t}function zi(){var e=he([]),t=Ri,n=Ii,r=Ts;function i(o){var l=Array.from(e.apply(this,arguments),Cs),u,a=l.length,s=-1,f;for(const c of o)for(u=0,++s;u<a;++u)(l[u][s]=[0,+r(c,l[u].key,s,o)]).data=c;for(u=0,f=Qr(t(l));u<a;++u)l[f[u]].index=u;return n(l,f),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:he(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:he(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Ri:typeof o=="function"?o:he(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Ii,i):n},i}function Wi(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function qi(e){let t,n,r,i,o,l;function u(f,c){if(f[2]==="hourly"||f[2]==="daily"||f[2]==="weekly")return Ns;if(f[2]==="monthly")return As}let a=u(e),s=a&&a(e);return{c(){t=ue("line"),o=ae(),s&&s.c(),l=Ut(),d(t,"x1",n=e[1](new Date(e[7]))),d(t,"x2",r=e[1](new Date(e[7]))),d(t,"y1",e[0]),d(t,"y2",i=e[0]+Nt),d(t,"stroke","#808080")},m(f,c){z(f,t,c),z(f,o,c),s&&s.m(f,c),z(f,l,c)},p(f,c){c&10&&n!==(n=f[1](new Date(f[7])))&&d(t,"x1",n),c&10&&r!==(r=f[1](new Date(f[7])))&&d(t,"x2",r),c&1&&d(t,"y1",f[0]),c&1&&i!==(i=f[0]+Nt)&&d(t,"y2",i),a===(a=u(f))&&s?s.p(f,c):(s&&s.d(1),s=a&&a(f),s&&(s.c(),s.m(l.parentNode,l)))},d(f){f&&(I(t),I(o),I(l)),s&&s.d(f)}}}function As(e){let t,n=An(e[7],"month")+"",r,i,o;return{c(){t=ue("text"),r=ge(n),d(t,"x",i=e[1](new Date(e[7]))),d(t,"y",o=e[0]+Nt),d(t,"dy","6"),d(t,"dominant-baseline","hanging"),d(t,"text-anchor","middle"),d(t,"class","svelte-e1340v")},m(l,u){z(l,t,u),N(t,r)},p(l,u){u&8&&n!==(n=An(l[7],"month")+"")&&ye(r,n),u&10&&i!==(i=l[1](new Date(l[7])))&&d(t,"x",i),u&1&&o!==(o=l[0]+Nt)&&d(t,"y",o)},d(l){l&&I(t)}}}function Ns(e){let t,n=An(e[7],"day")+"",r,i,o;return{c(){t=ue("text"),r=ge(n),d(t,"x",i=e[1](new Date(e[7]))),d(t,"y",o=e[0]+Nt),d(t,"dy","6"),d(t,"dominant-baseline","hanging"),d(t,"text-anchor","middle"),d(t,"class","svelte-e1340v")},m(l,u){z(l,t,u),N(t,r)},p(l,u){u&8&&n!==(n=An(l[7],"day")+"")&&ye(r,n),u&10&&i!==(i=l[1](new Date(l[7])))&&d(t,"x",i),u&1&&o!==(o=l[0]+Nt)&&d(t,"y",o)},d(l){l&&I(t)}}}function Vi(e){let t,n=e[7]&&qi(e);return{c(){n&&n.c(),t=Ut()},m(r,i){n&&n.m(r,i),z(r,t,i)},p(r,i){r[7]?n?n.p(r,i):(n=qi(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&I(t),n&&n.d(r)}}}function Es(e){let t,n=be(e[3]),r=[];for(let i=0;i<n.length;i+=1)r[i]=Vi(Wi(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Ut()},m(i,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(i,o);z(i,t,o)},p(i,[o]){if(o&15){n=be(i[3]);let l;for(l=0;l<n.length;l+=1){const u=Wi(i,n,l);r[l]?r[l].p(u,o):(r[l]=Vi(u),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:ie,o:ie,d(i){i&&I(t),nt(r,i)}}}const Nt=4,Fs=80;function An(e,t){const n=new Date(e);if(t==="day"){const r=n.getDate(),i=n.toLocaleDateString("en-US",{month:"short"});return`${r} ${i}`}else if(t==="month"){const r=n.toLocaleDateString("en-US",{month:"short"}),i=n.getFullYear().toString().substr(-2);return`${r} ${i}`}return e}function Ls(e,t,n){let r,{height:i}=t,{xScale:o}=t,{interval:l}=t,{width:u=0}=t,{customTicks:a=null}=t;function s(f,c){const h=f.domain(),g=f.range(),m=g[1]-g[0],p=Math.max(2,Math.floor(m/Fs)),y=(h[1]-h[0])/(1e3*60*60*24);if(c==="hourly")return y<=2?In.every(Math.max(1,Math.floor(12/p))).range(h[0],h[1]):y<=7?tt.every(1).range(h[0],h[1]):tt.every(Math.max(1,Math.floor(y/p))).range(h[0],h[1]);if(c==="daily")if(y<=30){const v=Math.max(1,Math.floor(y/p));return tt.every(v).range(h[0],h[1])}else return y<=90?Tt.every(Math.max(1,Math.floor(y/7/p))).range(h[0],h[1]):xt.every(Math.max(1,Math.floor(y/30/p))).range(h[0],h[1]);else if(c==="weekly"){const v=Math.ceil(y/7);if(y<=120){const w=Math.max(1,Math.floor(v/p));return Tt.every(w).range(h[0],h[1])}else return xt.every(Math.max(1,Math.floor(y/30/p))).range(h[0],h[1])}else if(c==="monthly"){const v=(h[1].getFullYear()-h[0].getFullYear())*12+(h[1].getMonth()-h[0].getMonth()),w=Math.max(1,Math.floor(v/(p/2)));return xt.every(w).range(h[0],h[1])}return f.ticks(p)}return e.$$set=f=>{"height"in f&&n(0,i=f.height),"xScale"in f&&n(1,o=f.xScale),"interval"in f&&n(2,l=f.interval),"width"in f&&n(4,u=f.width),"customTicks"in f&&n(5,a=f.customTicks)},e.$$.update=()=>{e.$$.dirty&34&&n(3,r=a||s(o,me)),e.$$.dirty&28&&r&&r.length>0&&console.log(`Generated ${r.length} ticks for interval: ${l}, width: ${u}px`)},[i,o,l,r,u,a]}class ol extends je{constructor(t){super(),$e(this,t,Ls,Es,ze,{height:0,xScale:1,interval:2,width:4,customTicks:5})}}function Xi(e,t,n){const r=e.slice();return r[5]=t[n],r[7]=n,r}function Us(e){let t,n,r=e[5]+"",i;return{c(){t=ue("line"),n=ue("text"),i=ge(r),d(t,"x1",0),d(t,"x2",Et),d(t,"y1",0),d(t,"y2",0),d(t,"stroke",e[7]===0?"#8f8f8f":"#e5e7eb"),d(n,"x",Et+ll),d(n,"dominant-baseline","middle"),d(n,"text-anchor","start"),d(n,"class","svelte-8lm8ea")},m(o,l){z(o,t,l),z(o,n,l),N(n,i)},p(o,l){l&8&&r!==(r=o[5]+"")&&ye(i,r)},d(o){o&&(I(t),I(n))}}}function Ps(e){let t,n,r=e[5]+"",i;return{c(){t=ue("line"),n=ue("text"),i=ge(r),d(t,"x1",-Et),d(t,"x2",e[0]),d(t,"y1",0),d(t,"y2",0),d(t,"stroke",e[7]===0?"#8f8f8f":"#e5e7eb"),d(n,"x",-Et-ll),d(n,"dominant-baseline","middle"),d(n,"text-anchor","end"),d(n,"class","svelte-8lm8ea")},m(o,l){z(o,t,l),z(o,n,l),N(n,i)},p(o,l){l&1&&d(t,"x2",o[0]),l&8&&r!==(r=o[5]+"")&&ye(i,r)},d(o){o&&(I(t),I(n))}}}function Bi(e){let t,n;function r(l,u){return l[4]==="left"?Ps:Us}let i=r(e),o=i(e);return{c(){t=ue("g"),o.c(),d(t,"class","tick"),d(t,"transform",n="translate(0, "+e[1](e[5])+")")},m(l,u){z(l,t,u),o.m(t,null)},p(l,u){i===(i=r(l))&&o?o.p(l,u):(o.d(1),o=i(l),o&&(o.c(),o.m(t,null))),u&10&&n!==(n="translate(0, "+l[1](l[5])+")")&&d(t,"transform",n)},d(l){l&&I(t),o.d()}}}function Ys(e){let t,n;return{c(){t=ue("text"),n=ge(e[2]),d(t,"class","axis-title svelte-8lm8ea"),d(t,"x",Et+30),d(t,"y",-36),d(t,"dy","4"),d(t,"dominant-baseline","hanging"),d(t,"text-anchor","end")},m(r,i){z(r,t,i),N(t,n)},p(r,i){i&4&&ye(n,r[2])},d(r){r&&I(t)}}}function Os(e){let t,n;return{c(){t=ue("text"),n=ge(e[2]),d(t,"class","axis-title svelte-8lm8ea"),d(t,"x",-Et-30),d(t,"y",-36),d(t,"dy","4"),d(t,"dominant-baseline","hanging"),d(t,"text-anchor","start")},m(r,i){z(r,t,i),N(t,n)},p(r,i){i&4&&ye(n,r[2])},d(r){r&&I(t)}}}function Hs(e){let t,n,r=be(e[3]),i=[];for(let a=0;a<r.length;a+=1)i[a]=Bi(Xi(e,r,a));function o(a,s){return a[4]==="left"?Os:Ys}let l=o(e),u=l(e);return{c(){t=ue("g");for(let a=0;a<i.length;a+=1)i[a].c();n=Ut(),u.c(),d(t,"class","axis y")},m(a,s){z(a,t,s);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);N(t,n),u.m(t,null)},p(a,[s]){if(s&27){r=be(a[3]);let f;for(f=0;f<r.length;f+=1){const c=Xi(a,r,f);i[f]?i[f].p(c,s):(i[f]=Bi(c),i[f].c(),i[f].m(t,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}l===(l=o(a))&&u?u.p(a,s):(u.d(1),u=l(a),u&&(u.c(),u.m(t,null)))},i:ie,o:ie,d(a){a&&I(t),nt(i,a),u.d()}}}const Et=10,ll=8;function Is(e,t,n){let{width:r}=t,{yScale:i}=t,{title:o}=t,{ticks:l}=t,{orientation:u="left"}=t;return e.$$set=a=>{"width"in a&&n(0,r=a.width),"yScale"in a&&n(1,i=a.yScale),"title"in a&&n(2,o=a.title),"ticks"in a&&n(3,l=a.ticks),"orientation"in a&&n(4,u=a.orientation)},[r,i,o,l,u]}class xr extends je{constructor(t){super(),$e(this,t,Is,Hs,ze,{width:0,yScale:1,title:2,ticks:3,orientation:4})}}function Gi(e){let t;return{c(){t=ue("line"),d(t,"x1",e[1]),d(t,"x2",e[1]),d(t,"y1",0),d(t,"y2",e[3]),d(t,"stroke","darkgrey"),d(t,"stroke-dasharray","2, 2"),d(t,"pointer-events","none")},m(n,r){z(n,t,r)},p(n,r){r&2&&d(t,"x1",n[1]),r&2&&d(t,"x2",n[1]),r&8&&d(t,"y2",n[3])},d(n){n&&I(t)}}}function Rs(e){let t,n,r,i,o,l=e[0]&&Gi(e);return{c(){t=ue("rect"),n=ae(),l&&l.c(),r=Ut(),d(t,"class","hover-listener svelte-hiaj90"),d(t,"fill","transparent"),d(t,"width",e[2]),d(t,"height",e[3])},m(u,a){z(u,t,a),z(u,n,a),l&&l.m(u,a),z(u,r,a),i||(o=[Ue(t,"mousemove",e[4]),Ue(t,"mouseleave",e[5])],i=!0)},p(u,[a]){a&4&&d(t,"width",u[2]),a&8&&d(t,"height",u[3]),u[0]?l?l.p(u,a):(l=Gi(u),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i:ie,o:ie,d(u){u&&(I(t),I(n),I(r)),l&&l.d(u),i=!1,Re(o)}}}function zs(e,t,n){let{xScale:r}=t,{margin:i}=t,{width:o}=t,{height:l}=t,{hoveredDate:u}=t,{xPos:a}=t,{aggregationLevel:s="hourly"}=t;const f=function(h){const g=h.offsetX-i.left,m=r.invert(g);n(0,u=m.getTime()),n(1,a=g)},c=function(){n(0,u=null),n(1,a=0)};return e.$$set=h=>{"xScale"in h&&n(6,r=h.xScale),"margin"in h&&n(7,i=h.margin),"width"in h&&n(2,o=h.width),"height"in h&&n(3,l=h.height),"hoveredDate"in h&&n(0,u=h.hoveredDate),"xPos"in h&&n(1,a=h.xPos),"aggregationLevel"in h&&n(8,s=h.aggregationLevel)},[u,a,o,l,f,c,r,i,s]}class Ws extends je{constructor(t){super(),$e(this,t,zs,Rs,ze,{xScale:6,margin:7,width:2,height:3,hoveredDate:0,xPos:1,aggregationLevel:8})}}const qs=["hydropower","geothermal","bioenergy","solar","wind","pumping_up","pumping_down","battery_charge","battery_generate","solar_curtailment","wind_curtailment"],Vs=["nuclear","thermal","thermal_lng","thermal_coal","thermal_oil","thermal_others","others"],Xs=["demand","spot_price"],Sr={hydropower:"blue",geothermal:"darkgray",bioenergy:"#009933",solar:"gold",wind:"#99CCFF",pumping_up:"#FFB6C1",pumping_down:"#FFB6C1",battery_charge:"#DAB1DA",battery_generate:"#DAB1DA",nuclear:"#FF0000",thermal_lng:"#FFDBBB",thermal_coal:"#808080",thermal_oil:"#996633",thermal_others:"#FFA500",thermal:"#FFA500",others:"#36454F",demand:"#000",spot_price:"purple",solar_curtailment:"black",wind_curtailment:"#40E0D0"},Ye={en:{hydropower:"Hydropower",geothermal:"Geothermal",bioenergy:"Biomass",solar:"SolarPV",wind:"Wind",pumping_up:"Pumped hydro(pump up)",pumping_down:"Pumped hydro(generate)",battery_charge:"Battery(charge)",battery_generate:"Battery(discharge)",nuclear:"Nuclear",thermal_lng:"Natural Gas",thermal_coal:"Coal",thermal_oil:"Oil",thermal_others:"Thermal(others)",thermal:"Thermal",others:"Others",demand:"Demand",spot_price:"JEPX Day-Ahead Market Price",solar_curtailment:"Curtailment SolarPV",wind_curtailment:"Curtailment Wind",powerGeneration:"Supply and Demand [GW]",systemPrice:"JEPX Day-ahead Market Price [JPY/kWh]",japan:"Japan",tokyo:"Tokyo",hokkaido:"Hokkaido",tohuku:"Tohoku",chubu:"Chubu",hokuriku:"Hokuriku",kansai:"Kansai",chugoku:"Chugoku",shikoku:"Shikoku",kyushu:"Kyushu"},jp:{hydropower:"水力",geothermal:"地熱",bioenergy:"バイオエネルギー",solar:"太陽光",wind:"風力",pumping_up:"揚水(揚水)",pumping_down:"揚水(発電)",battery_charge:"蓄電池(充電)",battery_generate:"蓄電池(放電)",nuclear:"原子力",thermal_lng:"LNG",thermal_coal:"石炭",thermal_oil:"石油",thermal_others:"火力その他",thermal:"火力",others:"その他",demand:"需要",spot_price:"JEPX前日スポット市場価格",solar_curtailment:"太陽光(出力制御)",wind_curtailment:"風力(出力制御)",powerGeneration:"需要・供給 [GW]",systemPrice:"JEPX前日スポット市場価格 [円/KWh]",japan:"全国",tokyo:"東京",hokkaido:"北海道",tohuku:"東北",chubu:"中部",hokuriku:"北陸",kansai:"関西",chugoku:"中国",shikoku:"四国",kyushu:"九州"}},Nn=["japan","tokyo","hokkaido","tohuku","chubu","hokuriku","kansai","chugoku","shikoku","kyushu"];function Bs(e){const t=e-1;return t*t*t+1}function Kt(e,{delay:t=0,duration:n=400,easing:r=Yn}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function Gs(e,{delay:t=0,duration:n=400,easing:r=Bs,x:i=0,y:o=0,opacity:l=0}={}){const u=getComputedStyle(e),a=+u.opacity,s=u.transform==="none"?"":u.transform,f=a*(1-l),[c,h]=ui(i),[g,m]=ui(o);return{delay:t,duration:n,easing:r,css:(p,_)=>`
			transform: ${s} translate(${(1-p)*c}${h}, ${(1-p)*g}${m});
			opacity: ${a-f*_}`}}function Ki(e,t,n){const r=e.slice();return r[15]=t[n],r}function Ji(e){let t,n,r=e[10](e[15],e[4])+"",i,o,l,u=(typeof e[0][e[15]]=="number"?e[0][e[15]].toFixed(2):e[0][e[15]])+"",a,s;return{c(){t=X("div"),n=X("span"),i=ge(r),o=ae(),l=X("span"),a=ge(u),s=ae(),d(n,"class","key svelte-11vy6zu"),Ke(n,"background",e[1](e[15])),d(t,"class","info svelte-11vy6zu")},m(f,c){z(f,t,c),N(t,n),N(n,i),N(t,o),N(t,l),N(l,a),N(t,s)},p(f,c){c&80&&r!==(r=f[10](f[15],f[4])+"")&&ye(i,r),c&66&&Ke(n,"background",f[1](f[15])),c&65&&u!==(u=(typeof f[0][f[15]]=="number"?f[0][f[15]].toFixed(2):f[0][f[15]])+"")&&ye(a,u)},d(f){f&&I(t)}}}function Zi(e){let t,n,r,i,o=e[10]("demand",e[4])+"",l,u,a,s=(typeof e[0].demand=="number"?e[0].demand.toFixed(2):e[0].demand)+"",f;return{c(){t=X("div"),n=ae(),r=X("div"),i=X("span"),l=ge(o),u=ae(),a=X("span"),f=ge(s),d(t,"class","separator svelte-11vy6zu"),d(i,"class","key demand-key svelte-11vy6zu"),d(r,"class","info special-row svelte-11vy6zu")},m(c,h){z(c,t,h),z(c,n,h),z(c,r,h),N(r,i),N(i,l),N(r,u),N(r,a),N(a,f)},p(c,h){h&16&&o!==(o=c[10]("demand",c[4])+"")&&ye(l,o),h&1&&s!==(s=(typeof c[0].demand=="number"?c[0].demand.toFixed(2):c[0].demand)+"")&&ye(f,s)},d(c){c&&(I(t),I(n),I(r))}}}function Qi(e){let t,n,r,i,o=e[10]("systemPrice",e[4])+"",l,u,a,s=(typeof e[0].spot_price=="number"?e[0].spot_price.toFixed(2):e[0].spot_price)+"",f,c;return{c(){t=X("div"),n=ae(),r=X("div"),i=X("span"),l=ge(o),u=ae(),a=X("span"),f=ge(s),c=ge(" ¥/kWh"),d(t,"class","separator svelte-11vy6zu"),d(i,"class","key spot_price-key svelte-11vy6zu"),d(r,"class","info special-row svelte-11vy6zu")},m(h,g){z(h,t,g),z(h,n,g),z(h,r,g),N(r,i),N(i,l),N(r,u),N(r,a),N(a,f),N(a,c)},p(h,g){g&16&&o!==(o=h[10]("systemPrice",h[4])+"")&&ye(l,o),g&1&&s!==(s=(typeof h[0].spot_price=="number"?h[0].spot_price.toFixed(2):h[0].spot_price)+"")&&ye(f,s)},d(h){h&&(I(t),I(n),I(r))}}}function Ks(e){let t,n,r,i,o,l,u,a,s,f,c=be(e[6]),h=[];for(let p=0;p<c.length;p+=1)h[p]=Ji(Ki(e,c,p));let g=e[2]&&e[0].demand!==void 0&&Zi(e),m=e[3]&&e[0].spot_price!==void 0&&Qi(e);return{c(){t=X("div"),n=X("h1"),r=ge(e[7]),i=ae();for(let p=0;p<h.length;p+=1)h[p].c();o=ae(),g&&g.c(),l=ae(),m&&m.c(),d(n,"class","svelte-11vy6zu"),d(t,"class","tooltip svelte-11vy6zu"),Ke(t,"left",e[8]+"px"),Ke(t,"top",e[9]+"px"),Ie(()=>e[14].call(t))},m(p,_){z(p,t,_),N(t,n),N(n,r),N(t,i);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(t,null);N(t,o),g&&g.m(t,null),N(t,l),m&&m.m(t,null),u=Yl(t,e[14].bind(t)),f=!0},p(p,[_]){if((!f||_&128)&&ye(r,p[7]),_&1107){c=be(p[6]);let y;for(y=0;y<c.length;y+=1){const v=Ki(p,c,y);h[y]?h[y].p(v,_):(h[y]=Ji(v),h[y].c(),h[y].m(t,o))}for(;y<h.length;y+=1)h[y].d(1);h.length=c.length}p[2]&&p[0].demand!==void 0?g?g.p(p,_):(g=Zi(p),g.c(),g.m(t,l)):g&&(g.d(1),g=null),p[3]&&p[0].spot_price!==void 0?m?m.p(p,_):(m=Qi(p),m.c(),m.m(t,null)):m&&(m.d(1),m=null),(!f||_&256)&&Ke(t,"left",p[8]+"px")},i(p){f||(p&&Ie(()=>{f&&(s&&s.end(1),a=Xl(t,Gs,{y:10,duration:200,delay:200}),a.start())}),f=!0)},o(p){a&&a.invalidate(),p&&(s=Bl(t,Kt,{})),f=!1},d(p){p&&I(t),nt(h,p),g&&g.d(),m&&m.d(),u(),p&&s&&s.end()}}}const rr=5,Js=5;function Zs(e,t){const n=new Date(e),r=f=>{if(f>3&&f<21)return"th";switch(f%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},i=n.getDate(),o=i+r(i),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],a=n.getFullYear();let s=t==="monthly"?`${u} ${a}`:`${o} ${u} ${a}`;if(t==="hourly"){let f=n.getHours();const c=n.getMinutes(),h=f>=12?"pm":"am";f=f%12,f=f||12;const g=c<10?"0"+c:c;s+=`, ${f}.${g}${h}`}return s}function Qs(e,t,n){let r,i,{width:o}=t,{data:l}=t,{colorScale:u}=t,{x:a}=t,{showDemand:s=!1}=t,{showSpotPrice:f=!1}=t,{aggregationLevel:c="hourly"}=t,{currentLang:h="en"}=t,g,m,p=Js;function _(v,w){return Ye[w][v]||v}function y(){g=this.clientWidth,n(5,g)}return e.$$set=v=>{"width"in v&&n(11,o=v.width),"data"in v&&n(0,l=v.data),"colorScale"in v&&n(1,u=v.colorScale),"x"in v&&n(12,a=v.x),"showDemand"in v&&n(2,s=v.showDemand),"showSpotPrice"in v&&n(3,f=v.showSpotPrice),"aggregationLevel"in v&&n(13,c=v.aggregationLevel),"currentLang"in v&&n(4,h=v.currentLang)},e.$$.update=()=>{if(e.$$.dirty&6176&&n(8,r=a+g+rr>o?a-g-rr:a+rr),e.$$.dirty&8193&&n(7,i=Zs(l.date,c)),e.$$.dirty&13&&l){let v=Object.entries(l);v.sort((x,S)=>S[1]-x[1]);let w=Object.fromEntries(v);n(6,m=Object.keys(w).filter(x=>x!=="date"&&x!=="region"&&(!s||x!=="demand")&&(!f||x!=="spot_price")))}},[l,u,s,f,h,g,m,i,r,p,_,o,a,c,y]}class $s extends je{constructor(t){super(),$e(this,t,Qs,Ks,ze,{width:11,data:0,colorScale:1,x:12,showDemand:2,showSpotPrice:3,aggregationLevel:13,currentLang:4})}}function $i(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}function ji(e,t,n){const r=e.slice();return r[36]=t[n],r[38]=n,r}function eo(e){let t,n,r,i,o,l,u;return{c(){t=ue("path"),d(t,"d",n=e[16](e[36])),d(t,"stroke",r=e[20](e[36].key)),d(t,"fill",i=e[20](e[36].key)),d(t,"stroke-width","1"),d(t,"opacity",o=e[2]?e[2]===e[36].key?1:.2:1)},m(a,s){z(a,t,s),u=!0},p(a,s){(!u||s[0]&327680&&n!==(n=a[16](a[36])))&&d(t,"d",n),(!u||s[0]&262144&&r!==(r=a[20](a[36].key)))&&d(t,"stroke",r),(!u||s[0]&262144&&i!==(i=a[20](a[36].key)))&&d(t,"fill",i),(!u||s[0]&262148&&o!==(o=a[2]?a[2]===a[36].key?1:.2:1))&&d(t,"opacity",o)},i(a){u||(a&&Ie(()=>{u&&(l||(l=_n(t,Kt,{},!0)),l.run(1))}),u=!0)},o(a){a&&(l||(l=_n(t,Kt,{},!1)),l.run(0)),u=!1},d(a){a&&I(t),a&&l&&l.end()}}}function to(e){let t,n,r,i,o,l,u;return{c(){t=ue("path"),d(t,"d",n=e[16](e[36])),d(t,"stroke",r=e[20](e[36].key)),d(t,"fill",i=e[20](e[36].key)),d(t,"stroke-width","1"),d(t,"opacity",o=e[2]?e[2]===e[36].key?1:.2:1)},m(a,s){z(a,t,s),u=!0},p(a,s){(!u||s[0]&196608&&n!==(n=a[16](a[36])))&&d(t,"d",n),(!u||s[0]&131072&&r!==(r=a[20](a[36].key)))&&d(t,"stroke",r),(!u||s[0]&131072&&i!==(i=a[20](a[36].key)))&&d(t,"fill",i),(!u||s[0]&131076&&o!==(o=a[2]?a[2]===a[36].key?1:.2:1))&&d(t,"opacity",o)},i(a){u||(a&&Ie(()=>{u&&(l||(l=_n(t,Kt,{},!0)),l.run(1))}),u=!0)},o(a){a&&(l||(l=_n(t,Kt,{},!1)),l.run(0)),u=!1},d(a){a&&I(t),a&&l&&l.end()}}}function no(e){let t,n;return t=new $s({props:{data:e[13],x:e[19],colorScale:e[20],width:e[12],showDemand:!0,showSpotPrice:!0,aggregationLevel:e[1],currentLang:e[3]}}),{c(){xe(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i[0]&8192&&(o.data=r[13]),i[0]&524288&&(o.x=r[19]),i[0]&4096&&(o.width=r[12]),i[0]&2&&(o.aggregationLevel=r[1]),i[0]&8&&(o.currentLang=r[3]),t.$set(o)},i(r){n||(oe(t.$$.fragment,r),n=!0)},o(r){fe(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function js(e){let t,n,r,i,o,l,u,a,s,f,c,h,g,m,p,_,y,v,w,x,S;i=new xr({props:{width:e[5],yScale:e[9],ticks:e[9].ticks(8),title:Ye[e[3]].powerGeneration||"powerGeneration",orientation:"left"}}),l=new xr({props:{width:0,yScale:e[7],ticks:e[7].ticks(8),title:Ye[e[3]].systemPrice||"systemPrice",orientation:"right"}}),a=new ol({props:{height:e[4],width:e[5],interval:e[1],xScale:e[8]}});let k=be(e[18]),T=[];for(let b=0;b<k.length;b+=1)T[b]=eo(ji(e,k,b));const O=b=>fe(T[b],1,1,()=>{T[b]=null});let W=be(e[17]),F=[];for(let b=0;b<W.length;b+=1)F[b]=to($i(e,W,b));const D=b=>fe(F[b],1,1,()=>{F[b]=null});function H(b){e[30](b)}function U(b){e[31](b)}let B={width:e[5],height:e[4],xScale:e[8],margin:e[21]};e[6]!==void 0&&(B.hoveredDate=e[6]),e[19]!==void 0&&(B.xPos=e[19]),y=new Ws({props:B}),Oe.push(()=>Vt(y,"hoveredDate",H)),Oe.push(()=>Vt(y,"xPos",U));let q=e[6]&&e[13]&&no(e);return{c(){t=X("div"),n=ue("svg"),r=ue("g"),xe(i.$$.fragment),o=ue("g"),xe(l.$$.fragment),xe(a.$$.fragment),s=ue("line");for(let b=0;b<T.length;b+=1)T[b].c();h=Ut();for(let b=0;b<F.length;b+=1)F[b].c();g=ue("path"),p=ue("path"),xe(y.$$.fragment),x=ae(),q&&q.c(),d(o,"transform",u="translate("+e[5]+", 0)"),d(s,"x1","0"),d(s,"y1",f=e[9](0)),d(s,"x2",e[5]),d(s,"y2",c=e[9](0)),d(s,"stroke","black"),d(s,"stroke-width","1"),d(s,"stroke-dasharray","4,4"),d(g,"d",m=e[15](e[0])),d(g,"fill","none"),d(g,"stroke","black"),d(g,"stroke-width","2"),d(p,"d",_=e[14](e[0])),d(p,"fill","none"),d(p,"stroke","purple"),d(p,"stroke-width","2"),d(r,"transform","translate("+e[21].left+" "+e[21].top+")"),d(n,"width",e[12]),d(n,"height",e[11]),d(t,"class","chart-container svelte-ou68eo")},m(b,C){z(b,t,C),N(t,n),N(n,r),ke(i,r,null),N(r,o),ke(l,o,null),ke(a,r,null),N(r,s);for(let V=0;V<T.length;V+=1)T[V]&&T[V].m(r,null);N(r,h);for(let V=0;V<F.length;V+=1)F[V]&&F[V].m(r,null);N(r,g),N(r,p),ke(y,r,null),N(t,x),q&&q.m(t,null),e[32](t),S=!0},p(b,C){const V={};C[0]&32&&(V.width=b[5]),C[0]&512&&(V.yScale=b[9]),C[0]&512&&(V.ticks=b[9].ticks(8)),C[0]&8&&(V.title=Ye[b[3]].powerGeneration||"powerGeneration"),i.$set(V);const K={};C[0]&128&&(K.yScale=b[7]),C[0]&128&&(K.ticks=b[7].ticks(8)),C[0]&8&&(K.title=Ye[b[3]].systemPrice||"systemPrice"),l.$set(K),(!S||C[0]&32&&u!==(u="translate("+b[5]+", 0)"))&&d(o,"transform",u);const ne={};if(C[0]&16&&(ne.height=b[4]),C[0]&32&&(ne.width=b[5]),C[0]&2&&(ne.interval=b[1]),C[0]&256&&(ne.xScale=b[8]),a.$set(ne),(!S||C[0]&512&&f!==(f=b[9](0)))&&d(s,"y1",f),(!S||C[0]&32)&&d(s,"x2",b[5]),(!S||C[0]&512&&c!==(c=b[9](0)))&&d(s,"y2",c),C[0]&1376260){k=be(b[18]);let P;for(P=0;P<k.length;P+=1){const E=ji(b,k,P);T[P]?(T[P].p(E,C),oe(T[P],1)):(T[P]=eo(E),T[P].c(),oe(T[P],1),T[P].m(r,h))}for(kt(),P=k.length;P<T.length;P+=1)O(P);Mt()}if(C[0]&1245188){W=be(b[17]);let P;for(P=0;P<W.length;P+=1){const E=$i(b,W,P);F[P]?(F[P].p(E,C),oe(F[P],1)):(F[P]=to(E),F[P].c(),oe(F[P],1),F[P].m(r,g))}for(kt(),P=W.length;P<F.length;P+=1)D(P);Mt()}(!S||C[0]&32769&&m!==(m=b[15](b[0])))&&d(g,"d",m),(!S||C[0]&16385&&_!==(_=b[14](b[0])))&&d(p,"d",_);const Z={};C[0]&32&&(Z.width=b[5]),C[0]&16&&(Z.height=b[4]),C[0]&256&&(Z.xScale=b[8]),!v&&C[0]&64&&(v=!0,Z.hoveredDate=b[6],qt(()=>v=!1)),!w&&C[0]&524288&&(w=!0,Z.xPos=b[19],qt(()=>w=!1)),y.$set(Z),(!S||C[0]&4096)&&d(n,"width",b[12]),(!S||C[0]&2048)&&d(n,"height",b[11]),b[6]&&b[13]?q?(q.p(b,C),C[0]&8256&&oe(q,1)):(q=no(b),q.c(),oe(q,1),q.m(t,null)):q&&(kt(),fe(q,1,1,()=>{q=null}),Mt())},i(b){if(!S){oe(i.$$.fragment,b),oe(l.$$.fragment,b),oe(a.$$.fragment,b);for(let C=0;C<k.length;C+=1)oe(T[C]);for(let C=0;C<W.length;C+=1)oe(F[C]);oe(y.$$.fragment,b),oe(q),S=!0}},o(b){fe(i.$$.fragment,b),fe(l.$$.fragment,b),fe(a.$$.fragment,b),T=T.filter(Boolean);for(let C=0;C<T.length;C+=1)fe(T[C]);F=F.filter(Boolean);for(let C=0;C<F.length;C+=1)fe(F[C]);fe(y.$$.fragment,b),fe(q),S=!1},d(b){b&&I(t),Me(i),Me(l),Me(a),nt(T,b),nt(F,b),Me(y),q&&q.d(),e[32](null)}}}function ef(e){const t=Object.keys(e[0]||{}).filter(r=>r!=="date"&&r!=="region"&&r!=="demand"&&r!=="spot_price"),n={};return t.forEach(r=>{n[r]=e.reduce((i,o)=>i+(o[r]||0),0)}),t.sort((r,i)=>n[i]-n[r])}function ro(e,t){if(e.length)for(let n=0,r=e[0].length;n<r;++n){let i=0,o=0;for(let l=0;l<e.length;++l){const u=e[l][n][1]-e[l][n][0];u<0?(e[l][n][1]=o,e[l][n][0]=o+=u):(e[l][n][0]=i,e[l][n][1]=i+=u)}}}function ir(e){const t=new Date(e),n=t.getDay();return t.setDate(t.getDate()-n),t.setHours(0,0,0,0),t}function tf(e,t,n){let r,i,o,l,u,a,s,f,c,h,g,m,p,_,y,v,w,x,S,{data:k,aggregationLevel:T,clickedItem:O}=t,{currentLang:W="en"}=t;const F=Po().domain(Object.keys(Sr)).range(Object.values(Sr)),D={top:40,right:50,bottom:30,left:50};let H,U=520,B=600,q=U-D.top-D.bottom,b=B-D.left-D.right;On(()=>{C()}),Lo(()=>{C()});function C(){H&&(n(12,B=H.clientWidth),n(5,b=B-D.left-D.right),n(11,U=H.clientHeight),n(4,q=U-D.top-D.bottom))}function V(E,j){const re=[],ce=[];return j.forEach($=>{const pe=E.some(Y=>(Y[$]||0)<0),A=E.some(Y=>(Y[$]||0)>0);pe&&ce.push($),A&&re.push($)}),{positiveKeys:re,negativeKeys:ce}}function K(E,j,re){return E.length?E.reduce((ce,$)=>{const pe=new Date($.date),A=pe.getTime(),Y=ce?new Date(ce.date):null,J=Y?Y.getTime():null;if(!ce||A===j)return $;if(re==="hourly"){if(Math.abs(A-j)<Math.abs(J-j))return $}else if(re==="daily"){const M=new Date(j).setHours(0,0,0,0),G=new Date(pe).setHours(0,0,0,0),Q=new Date(Y).setHours(0,0,0,0);if(Math.abs(G-M)<Math.abs(Q-M))return $}else if(re==="weekly"){const M=ir(new Date(j)),G=ir(pe),Q=ir(Y);if(Math.abs(G.getTime()-M.getTime())<Math.abs(Q.getTime()-M.getTime()))return $}else if(re==="monthly"){const M=new Date(j),G=M.getMonth(),Q=M.getFullYear(),se=pe.getMonth(),de=pe.getFullYear(),R=Y.getMonth(),ee=Y.getFullYear(),Ne=Q*12+G,Te=de*12+se,jt=ee*12+R;if(Math.abs(Te-Ne)<Math.abs(jt-Ne))return $}return ce},null):null}function ne(E){r=E,n(6,r)}function Z(E){i=E,n(19,i)}function P(E){Oe[E?"unshift":"push"](()=>{H=E,n(10,H)})}return e.$$set=E=>{"data"in E&&n(0,k=E.data),"aggregationLevel"in E&&n(1,T=E.aggregationLevel),"clickedItem"in E&&n(2,O=E.clickedItem),"currentLang"in E&&n(3,W=E.currentLang)},e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,o=ef(k)),e.$$.dirty[0]&4194305&&n(29,l=V(k,o)),e.$$.dirty[0]&536870912&&n(24,u=l.positiveKeys),e.$$.dirty[0]&536870912&&n(23,a=l.negativeKeys),e.$$.dirty[0]&8388609&&n(28,s=Math.min(ci(k,E=>{let j=0;return a.forEach(re=>{const ce=E[re]||0;ce<0&&(j+=ce)}),j}),ci(k,E=>E.demand||0))*1.1),e.$$.dirty[0]&16777217&&n(27,f=Math.max(yr(k,E=>{let j=0;return u.forEach(re=>{const ce=E[re]||0;ce>0&&(j+=ce)}),j}),yr(k,E=>E.demand||0))*1.1),e.$$.dirty[0]&402653200&&n(9,g=Dn().domain([s,f]).range([q,0])),e.$$.dirty[0]&100663312&&n(7,m=Dn().domain([c,h]).range([q,0])),e.$$.dirty[0]&33&&n(8,p=Zr().domain([new Date(k[0].date),new Date(k[k.length-1].date)]).range([0,b])),e.$$.dirty[0]&20971521&&n(18,_=zi().keys(u).offset(ro)(k.map(E=>{const j={...E};return o.forEach(re=>{j[re]=E[re]>0?E[re]:0}),j}))),e.$$.dirty[0]&12582913&&n(17,y=zi().keys(a).offset(ro)(k.map(E=>{const j={...E};return o.forEach(re=>{j[re]=E[re]<0?E[re]:0}),j}))),e.$$.dirty[0]&768&&n(16,v=Ss().x(E=>p(new Date(E.data.date))).y0(E=>g(E[0])).y1(E=>g(E[1]))),e.$$.dirty[0]&768&&n(15,w=Cn().x(E=>p(new Date(E.date))).y(E=>g(E.demand||0))),e.$$.dirty[0]&384&&n(14,x=Cn().x(E=>p(new Date(E.date))).y(E=>m(E.spot_price||0))),e.$$.dirty[0]&67&&n(13,S=r?K(k,r,T):null)},n(6,r=null),n(19,i=0),n(26,c=0),n(25,h=130),[k,T,O,W,q,b,r,m,p,g,H,U,B,S,x,w,v,y,_,i,F,D,o,a,u,h,c,f,s,l,ne,Z,P]}class nf extends je{constructor(t){super(),$e(this,t,tf,js,ze,{data:0,aggregationLevel:1,clickedItem:2,currentLang:3},null,[-1,-1])}}function io(e,t,n){const r=e.slice();return r[15]=t[n],r}function oo(e){let t,n,r,i,o,l,u,a,s,f=e[15][0]+"",c,h,g;return{c(){t=ue("path"),r=ue("circle"),l=ue("circle"),s=ue("text"),c=ge(f),d(t,"d",n=e[9](e[15][1])),d(t,"stroke","black"),d(t,"fill","transparent"),d(t,"stroke-width","3"),d(r,"cx",i=e[5](new Date(e[15][1][0].date_id))),d(r,"cy",o=e[4](e[15][1][0].value)),d(r,"r",5),d(r,"fill","black"),d(l,"cx",u=e[5](new Date(e[15][1][e[15][1].length-1].date_id))),d(l,"cy",a=e[4](e[15][1][e[15][1].length-1].value)),d(l,"r",5),d(l,"fill","black"),d(s,"x",h=e[5](new Date(e[15][1][0].date_id))+10),d(s,"y",g=e[4](e[15][1][0].value)-10),d(s,"fill","black"),d(s,"text-anchor","start")},m(m,p){z(m,t,p),z(m,r,p),z(m,l,p),z(m,s,p),N(s,c)},p(m,p){p&1536&&n!==(n=m[9](m[15][1]))&&d(t,"d",n),p&1056&&i!==(i=m[5](new Date(m[15][1][0].date_id)))&&d(r,"cx",i),p&1040&&o!==(o=m[4](m[15][1][0].value))&&d(r,"cy",o),p&1056&&u!==(u=m[5](new Date(m[15][1][m[15][1].length-1].date_id)))&&d(l,"cx",u),p&1040&&a!==(a=m[4](m[15][1][m[15][1].length-1].value))&&d(l,"cy",a),p&1024&&f!==(f=m[15][0]+"")&&ye(c,f),p&1056&&h!==(h=m[5](new Date(m[15][1][0].date_id))+10)&&d(s,"x",h),p&1040&&g!==(g=m[4](m[15][1][0].value)-10)&&d(s,"y",g)},d(m){m&&(I(t),I(r),I(l),I(s))}}}function rf(e){let t,n,r,i,o,l;i=new ol({props:{height:e[2],width:e[3],xScale:e[5],interval:"monthly",customTicks:[e[0][0].date_id,e[0][e[0].length-1].date_id]}}),o=new xr({props:{width:e[3],yScale:e[4],ticks:e[4].ticks(6),title:Ye[e[1]].powerGeneration||"powerGeneration"}});let u=be(e[10]),a=[];for(let s=0;s<u.length;s+=1)a[s]=oo(io(e,u,s));return{c(){t=X("div"),n=ue("svg"),r=ue("g"),xe(i.$$.fragment),xe(o.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();d(r,"transform","translate("+e[11].left+" "+e[11].top+")"),d(n,"width",e[7]),d(n,"height",e[8]),d(t,"class","chart-container svelte-h4stok")},m(s,f){z(s,t,f),N(t,n),N(n,r),ke(i,r,null),ke(o,r,null);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(r,null);e[13](t),l=!0},p(s,[f]){const c={};f&4&&(c.height=s[2]),f&8&&(c.width=s[3]),f&32&&(c.xScale=s[5]),f&1&&(c.customTicks=[s[0][0].date_id,s[0][s[0].length-1].date_id]),i.$set(c);const h={};if(f&8&&(h.width=s[3]),f&16&&(h.yScale=s[4]),f&16&&(h.ticks=s[4].ticks(6)),f&2&&(h.title=Ye[s[1]].powerGeneration||"powerGeneration"),o.$set(h),f&1584){u=be(s[10]);let g;for(g=0;g<u.length;g+=1){const m=io(s,u,g);a[g]?a[g].p(m,f):(a[g]=oo(m),a[g].c(),a[g].m(r,null))}for(;g<a.length;g+=1)a[g].d(1);a.length=u.length}(!l||f&128)&&d(n,"width",s[7]),(!l||f&256)&&d(n,"height",s[8])},i(s){l||(oe(i.$$.fragment,s),oe(o.$$.fragment,s),l=!0)},o(s){fe(i.$$.fragment,s),fe(o.$$.fragment,s),l=!1},d(s){s&&I(t),Me(i),Me(o),nt(a,s),e[13](null)}}}function of(e,t,n){let r,i,o,l,u,{data:a}=t,{currentLang:s="en"}=t;const f={top:40,right:60,bottom:30,left:60};let c,h=200,g=520,m=g-f.top-f.bottom,p=h-f.left-f.right;On(()=>{_()}),Lo(()=>{_()});function _(){c&&(n(7,h=c.clientWidth),n(3,p=h-f.left-f.right),n(8,g=c.clientHeight),n(2,m=g-f.top-f.bottom))}function y(v){Oe[v?"unshift":"push"](()=>{c=v,n(6,c)})}return e.$$set=v=>{"data"in v&&n(0,a=v.data),"currentLang"in v&&n(1,s=v.currentLang)},e.$$.update=()=>{e.$$.dirty&1&&n(12,r=a&&a.length>0?yr(a,v=>v.value)*1.1:1e3),e.$$.dirty&1&&n(10,i=la(a,v=>v.type)),e.$$.dirty&4100&&n(4,o=Dn().domain([0,r]).range([m,0])),e.$$.dirty&9&&n(5,l=Zr().domain([new Date(a[0].date_id),new Date(a[a.length-1].date_id)]).range([0,p])),e.$$.dirty&48&&n(9,u=Cn().x((v,w)=>l(new Date(v.date_id))).y(v=>o(v.value)))},[a,s,m,p,o,l,c,h,g,u,i,f,r,y]}class lf extends je{constructor(t){super(),$e(this,t,of,rf,ze,{data:0,currentLang:1})}}var Tr="http://www.w3.org/1999/xhtml";const lo={svg:"http://www.w3.org/2000/svg",xhtml:Tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lo.hasOwnProperty(t)?{space:lo[t],local:e}:e}function af(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tr&&t.documentElement.namespaceURI===Tr?t.createElement(e):t.createElementNS(n,e)}}function uf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function al(e){var t=Rn(e);return(t.local?uf:af)(t)}function sf(){}function $r(e){return e==null?sf:function(){return this.querySelector(e)}}function ff(e){typeof e!="function"&&(e=$r(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,u=r[i]=new Array(l),a,s,f=0;f<l;++f)(a=o[f])&&(s=e.call(a,a.__data__,f,o))&&("__data__"in a&&(s.__data__=a.__data__),u[f]=s);return new Se(r,this._parents)}function cf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hf(){return[]}function ul(e){return e==null?hf:function(){return this.querySelectorAll(e)}}function gf(e){return function(){return cf(e.apply(this,arguments))}}function df(e){typeof e=="function"?e=gf(e):e=ul(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var l=t[o],u=l.length,a,s=0;s<u;++s)(a=l[s])&&(r.push(e.call(a,a.__data__,s,l)),i.push(a));return new Se(r,i)}function sl(e){return function(){return this.matches(e)}}function fl(e){return function(t){return t.matches(e)}}var mf=Array.prototype.find;function pf(e){return function(){return mf.call(this.children,e)}}function _f(){return this.firstElementChild}function yf(e){return this.select(e==null?_f:pf(typeof e=="function"?e:fl(e)))}var wf=Array.prototype.filter;function vf(){return Array.from(this.children)}function bf(e){return function(){return wf.call(this.children,e)}}function kf(e){return this.selectAll(e==null?vf:bf(typeof e=="function"?e:fl(e)))}function Mf(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,u=r[i]=[],a,s=0;s<l;++s)(a=o[s])&&e.call(a,a.__data__,s,o)&&u.push(a);return new Se(r,this._parents)}function cl(e){return new Array(e.length)}function Df(){return new Se(this._enter||this._groups.map(cl),this._parents)}function En(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}En.prototype={constructor:En,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xf(e){return function(){return e}}function Sf(e,t,n,r,i,o){for(var l=0,u,a=t.length,s=o.length;l<s;++l)(u=t[l])?(u.__data__=o[l],r[l]=u):n[l]=new En(e,o[l]);for(;l<a;++l)(u=t[l])&&(i[l]=u)}function Tf(e,t,n,r,i,o,l){var u,a,s=new Map,f=t.length,c=o.length,h=new Array(f),g;for(u=0;u<f;++u)(a=t[u])&&(h[u]=g=l.call(a,a.__data__,u,t)+"",s.has(g)?i[u]=a:s.set(g,a));for(u=0;u<c;++u)g=l.call(e,o[u],u,o)+"",(a=s.get(g))?(r[u]=a,a.__data__=o[u],s.delete(g)):n[u]=new En(e,o[u]);for(u=0;u<f;++u)(a=t[u])&&s.get(h[u])===a&&(i[u]=a)}function Cf(e){return e.__data__}function Af(e,t){if(!arguments.length)return Array.from(this,Cf);var n=t?Tf:Sf,r=this._parents,i=this._groups;typeof e!="function"&&(e=xf(e));for(var o=i.length,l=new Array(o),u=new Array(o),a=new Array(o),s=0;s<o;++s){var f=r[s],c=i[s],h=c.length,g=Nf(e.call(f,f&&f.__data__,s,r)),m=g.length,p=u[s]=new Array(m),_=l[s]=new Array(m),y=a[s]=new Array(h);n(f,c,p,_,y,g,t);for(var v=0,w=0,x,S;v<m;++v)if(x=p[v]){for(v>=w&&(w=v+1);!(S=_[w])&&++w<m;);x._next=S||null}}return l=new Se(l,r),l._enter=u,l._exit=a,l}function Nf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ef(){return new Se(this._exit||this._groups.map(cl),this._parents)}function Ff(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Lf(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,l=Math.min(i,o),u=new Array(i),a=0;a<l;++a)for(var s=n[a],f=r[a],c=s.length,h=u[a]=new Array(c),g,m=0;m<c;++m)(g=s[m]||f[m])&&(h[m]=g);for(;a<i;++a)u[a]=n[a];return new Se(u,this._parents)}function Uf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Pf(e){e||(e=Yf);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],u=l.length,a=i[o]=new Array(u),s,f=0;f<u;++f)(s=l[f])&&(a[f]=s);a.sort(t)}return new Se(i,this._parents).order()}function Yf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Of(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Hf(){return Array.from(this)}function If(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function Rf(){let e=0;for(const t of this)++e;return e}function zf(){return!this.node()}function Wf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,l=i.length,u;o<l;++o)(u=i[o])&&e.call(u,u.__data__,o,i);return this}function qf(e){return function(){this.removeAttribute(e)}}function Vf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xf(e,t){return function(){this.setAttribute(e,t)}}function Bf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Kf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Jf(e,t){var n=Rn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vf:qf:typeof t=="function"?n.local?Kf:Gf:n.local?Bf:Xf)(n,t))}function hl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zf(e){return function(){this.style.removeProperty(e)}}function Qf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $f(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function jf(e,t,n){return arguments.length>1?this.each((t==null?Zf:typeof t=="function"?$f:Qf)(e,t,n??"")):Ft(this.node(),e)}function Ft(e,t){return e.style.getPropertyValue(t)||hl(e).getComputedStyle(e,null).getPropertyValue(t)}function ec(e){return function(){delete this[e]}}function tc(e,t){return function(){this[e]=t}}function nc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rc(e,t){return arguments.length>1?this.each((t==null?ec:typeof t=="function"?nc:tc)(e,t)):this.node()[e]}function gl(e){return e.trim().split(/^|\s+/)}function jr(e){return e.classList||new dl(e)}function dl(e){this._node=e,this._names=gl(e.getAttribute("class")||"")}dl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ml(e,t){for(var n=jr(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pl(e,t){for(var n=jr(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ic(e){return function(){ml(this,e)}}function oc(e){return function(){pl(this,e)}}function lc(e,t){return function(){(t.apply(this,arguments)?ml:pl)(this,e)}}function ac(e,t){var n=gl(e+"");if(arguments.length<2){for(var r=jr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?lc:t?ic:oc)(n,t))}function uc(){this.textContent=""}function sc(e){return function(){this.textContent=e}}function fc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cc(e){return arguments.length?this.each(e==null?uc:(typeof e=="function"?fc:sc)(e)):this.node().textContent}function hc(){this.innerHTML=""}function gc(e){return function(){this.innerHTML=e}}function dc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mc(e){return arguments.length?this.each(e==null?hc:(typeof e=="function"?dc:gc)(e)):this.node().innerHTML}function pc(){this.nextSibling&&this.parentNode.appendChild(this)}function _c(){return this.each(pc)}function yc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wc(){return this.each(yc)}function vc(e){var t=typeof e=="function"?e:al(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bc(){return null}function kc(e,t){var n=typeof e=="function"?e:al(e),r=t==null?bc:typeof t=="function"?t:$r(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Mc(){var e=this.parentNode;e&&e.removeChild(this)}function Dc(){return this.each(Mc)}function xc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tc(e){return this.select(e?Sc:xc)}function Cc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ac(e){return function(t){e.call(this,t,this.__data__)}}function Nc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ec(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Fc(e,t,n){return function(){var r=this.__on,i,o=Ac(t);if(r){for(var l=0,u=r.length;l<u;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Lc(e,t,n){var r=Nc(e+""),i,o=r.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var a=0,s=u.length,f;a<s;++a)for(i=0,f=u[a];i<o;++i)if((l=r[i]).type===f.type&&l.name===f.name)return f.value}return}for(u=t?Fc:Ec,i=0;i<o;++i)this.each(u(r[i],t,n));return this}function _l(e,t,n){var r=hl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Uc(e,t){return function(){return _l(this,e,t)}}function Pc(e,t){return function(){return _l(this,e,t.apply(this,arguments))}}function Yc(e,t){return this.each((typeof t=="function"?Pc:Uc)(e,t))}function*Oc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var yl=[null];function Se(e,t){this._groups=e,this._parents=t}function $t(){return new Se([[document.documentElement]],yl)}function Hc(){return this}Se.prototype=$t.prototype={constructor:Se,select:ff,selectAll:df,selectChild:yf,selectChildren:kf,filter:Mf,data:Af,enter:Df,exit:Ef,join:Ff,merge:Lf,selection:Hc,order:Uf,sort:Pf,call:Of,nodes:Hf,node:If,size:Rf,empty:zf,each:Wf,attr:Jf,style:jf,property:rc,classed:ac,text:cc,html:mc,raise:_c,lower:wc,append:vc,insert:kc,remove:Dc,clone:Tc,datum:Cc,on:Lc,dispatch:Yc,[Symbol.iterator]:Oc};function Xe(e){return typeof e=="string"?new Se([[document.querySelector(e)]],[document.documentElement]):new Se([[e]],yl)}function Ic(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ao(e,t){if(e=Ic(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var Rc={value:()=>{}};function ei(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sn(n)}function sn(e){this._=e}function zc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sn.prototype=ei.prototype={constructor:sn,on:function(e,t){var n=this._,r=zc(e+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(e=r[o]).type)&&(i=Wc(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(i=(e=r[o]).type)n[i]=uo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=uo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Wc(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function uo(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Rc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}const Cr={capture:!0,passive:!1};function Ar(e){e.preventDefault(),e.stopImmediatePropagation()}function qc(e){var t=e.document.documentElement,n=Xe(e).on("dragstart.drag",Ar,Cr);"onselectstart"in t?n.on("selectstart.drag",Ar,Cr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vc(e,t){var n=e.document.documentElement,r=Xe(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ar,Cr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Lt=0,Rt=0,It=0,wl=1e3,Fn,zt,Ln=0,st=0,zn=0,Jt=typeof performance=="object"&&performance.now?performance:Date,vl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ti(){return st||(vl(Xc),st=Jt.now()+zn)}function Xc(){st=0}function Un(){this._call=this._time=this._next=null}Un.prototype=bl.prototype={constructor:Un,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ti():+n)+(t==null?0:+t),!this._next&&zt!==this&&(zt?zt._next=this:Fn=this,zt=this),this._call=e,this._time=n,Nr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nr())}};function bl(e,t,n){var r=new Un;return r.restart(e,t,n),r}function Bc(){ti(),++Lt;for(var e=Fn,t;e;)(t=st-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Lt}function so(){st=(Ln=Jt.now())+zn,Lt=Rt=0;try{Bc()}finally{Lt=0,Kc(),st=0}}function Gc(){var e=Jt.now(),t=e-Ln;t>wl&&(zn-=t,Ln=e)}function Kc(){for(var e,t=Fn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fn=n);zt=e,Nr(r)}function Nr(e){if(!Lt){Rt&&(Rt=clearTimeout(Rt));var t=e-st;t>24?(e<1/0&&(Rt=setTimeout(so,e-Jt.now()-zn)),It&&(It=clearInterval(It))):(It||(Ln=Jt.now(),It=setInterval(Gc,wl)),Lt=1,vl(so))}}function fo(e,t,n){var r=new Un;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Jc=ei("start","end","cancel","interrupt"),Zc=[],kl=0,co=1,Er=2,fn=3,ho=4,Fr=5,cn=6;function Wn(e,t,n,r,i,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Qc(e,n,{name:t,index:r,group:i,on:Jc,tween:Zc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:kl})}function ni(e,t){var n=Le(e,t);if(n.state>kl)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Le(e,t);if(n.state>fn)throw new Error("too late; already running");return n}function Le(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qc(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=bl(o,0,n.time);function o(s){n.state=co,n.timer.restart(l,n.delay,n.time),n.delay<=s&&l(s-n.delay)}function l(s){var f,c,h,g;if(n.state!==co)return a();for(f in r)if(g=r[f],g.name===n.name){if(g.state===fn)return fo(l);g.state===ho?(g.state=cn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=cn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(fo(function(){n.state===fn&&(n.state=ho,n.timer.restart(u,n.delay,n.time),u(s))}),n.state=Er,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Er){for(n.state=fn,i=new Array(h=n.tween.length),f=0,c=-1;f<h;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=g);i.length=c+1}}function u(s){for(var f=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(a),n.state=Fr,1),c=-1,h=i.length;++c<h;)i[c].call(e,f);n.state===Fr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=cn,n.timer.stop(),delete r[t];for(var s in r)return;delete e.__transition}}function Lr(e,t){var n=e.__transition,r,i,o=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}i=r.state>Er&&r.state<Fr,r.state=cn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function $c(e){return this.each(function(){Lr(this,e)})}function jc(e,t){var n,r;return function(){var i=We(this,e),o=i.tween;if(o!==n){r=n=o;for(var l=0,u=r.length;l<u;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function eh(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=We(this,e),l=o.tween;if(l!==r){i=(r=l).slice();for(var u={name:t,value:n},a=0,s=i.length;a<s;++a)if(i[a].name===t){i[a]=u;break}a===s&&i.push(u)}o.tween=i}}function th(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Le(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?jc:eh)(n,e,t))}function ri(e,t,n){var r=e._id;return e.each(function(){var i=We(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Le(i,r).value[t]}}function Ml(e,t){var n;return(typeof t=="number"?Ee:t instanceof at?bn:(n=at(t))?(t=n,bn):Io)(e,t)}function nh(e){return function(){this.removeAttribute(e)}}function rh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ih(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function oh(e,t,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function lh(e,t,n){var r,i,o;return function(){var l,u=n(this),a;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),a=u+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,u)))}}function ah(e,t,n){var r,i,o;return function(){var l,u=n(this),a;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),a=u+"",l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,u)))}}function uh(e,t){var n=Rn(e),r=n==="transform"?Ha:Ml;return this.attrTween(e,typeof t=="function"?(n.local?ah:lh)(n,r,ri(this,"attr."+e,t)):t==null?(n.local?rh:nh)(n):(n.local?oh:ih)(n,r,t))}function sh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function fh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ch(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&fh(e,o)),n}return i._value=t,i}function hh(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&sh(e,o)),n}return i._value=t,i}function gh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Rn(e);return this.tween(n,(r.local?ch:hh)(r,t))}function dh(e,t){return function(){ni(this,e).delay=+t.apply(this,arguments)}}function mh(e,t){return t=+t,function(){ni(this,e).delay=t}}function ph(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dh:mh)(t,e)):Le(this.node(),t).delay}function _h(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function yh(e,t){return t=+t,function(){We(this,e).duration=t}}function wh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_h:yh)(t,e)):Le(this.node(),t).duration}function vh(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function bh(e){var t=this._id;return arguments.length?this.each(vh(t,e)):Le(this.node(),t).ease}function kh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function Mh(e){if(typeof e!="function")throw new Error;return this.each(kh(this._id,e))}function Dh(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],l=o.length,u=r[i]=[],a,s=0;s<l;++s)(a=o[s])&&e.call(a,a.__data__,s,o)&&u.push(a);return new Qe(r,this._parents,this._name,this._id)}function xh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),l=new Array(r),u=0;u<o;++u)for(var a=t[u],s=n[u],f=a.length,c=l[u]=new Array(f),h,g=0;g<f;++g)(h=a[g]||s[g])&&(c[g]=h);for(;u<r;++u)l[u]=t[u];return new Qe(l,this._parents,this._name,this._id)}function Sh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Th(e,t,n){var r,i,o=Sh(t)?ni:We;return function(){var l=o(this,e),u=l.on;u!==r&&(i=(r=u).copy()).on(t,n),l.on=i}}function Ch(e,t){var n=this._id;return arguments.length<2?Le(this.node(),n).on.on(e):this.each(Th(n,e,t))}function Ah(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nh(){return this.on("end.remove",Ah(this._id))}function Eh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$r(e));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var u=r[l],a=u.length,s=o[l]=new Array(a),f,c,h=0;h<a;++h)(f=u[h])&&(c=e.call(f,f.__data__,h,u))&&("__data__"in f&&(c.__data__=f.__data__),s[h]=c,Wn(s[h],t,n,h,s,Le(f,n)));return new Qe(o,this._parents,t,n)}function Fh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ul(e));for(var r=this._groups,i=r.length,o=[],l=[],u=0;u<i;++u)for(var a=r[u],s=a.length,f,c=0;c<s;++c)if(f=a[c]){for(var h=e.call(f,f.__data__,c,a),g,m=Le(f,n),p=0,_=h.length;p<_;++p)(g=h[p])&&Wn(g,t,n,p,h,m);o.push(h),l.push(f)}return new Qe(o,l,t,n)}var Lh=$t.prototype.constructor;function Uh(){return new Lh(this._groups,this._parents)}function Ph(e,t){var n,r,i;return function(){var o=Ft(this,e),l=(this.style.removeProperty(e),Ft(this,e));return o===l?null:o===n&&l===r?i:i=t(n=o,r=l)}}function Dl(e){return function(){this.style.removeProperty(e)}}function Yh(e,t,n){var r,i=n+"",o;return function(){var l=Ft(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}function Oh(e,t,n){var r,i,o;return function(){var l=Ft(this,e),u=n(this),a=u+"";return u==null&&(a=u=(this.style.removeProperty(e),Ft(this,e))),l===a?null:l===r&&a===i?o:(i=a,o=t(r=l,u))}}function Hh(e,t){var n,r,i,o="style."+t,l="end."+o,u;return function(){var a=We(this,e),s=a.on,f=a.value[o]==null?u||(u=Dl(t)):void 0;(s!==n||i!==f)&&(r=(n=s).copy()).on(l,i=f),a.on=r}}function Ih(e,t,n){var r=(e+="")=="transform"?Oa:Ml;return t==null?this.styleTween(e,Ph(e,r)).on("end.style."+e,Dl(e)):typeof t=="function"?this.styleTween(e,Oh(e,r,ri(this,"style."+e,t))).each(Hh(this._id,e)):this.styleTween(e,Yh(e,r,t),n).on("end.style."+e,null)}function Rh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zh(e,t,n){var r,i;function o(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&Rh(e,l,n)),r}return o._value=t,o}function Wh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zh(e,t,n??""))}function qh(e){return function(){this.textContent=e}}function Vh(e){return function(){var t=e(this);this.textContent=t??""}}function Xh(e){return this.tween("text",typeof e=="function"?Vh(ri(this,"text",e)):qh(e==null?"":e+""))}function Bh(e){return function(t){this.textContent=e.call(this,t)}}function Gh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Bh(i)),t}return r._value=e,r}function Kh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gh(e))}function Jh(){for(var e=this._name,t=this._id,n=xl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],u=l.length,a,s=0;s<u;++s)if(a=l[s]){var f=Le(a,t);Wn(a,e,n,s,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Qe(r,this._parents,e,n)}function Zh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var u={value:l},a={value:function(){--i===0&&o()}};n.each(function(){var s=We(this,r),f=s.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(a)),s.on=t}),i===0&&o()})}var Qh=0;function Qe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xl(){return++Qh}var qe=$t.prototype;Qe.prototype={constructor:Qe,select:Eh,selectAll:Fh,selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:Dh,merge:xh,selection:Uh,transition:Jh,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:Ch,attr:uh,attrTween:gh,style:Ih,styleTween:Wh,text:Xh,textTween:Kh,remove:Nh,tween:th,delay:ph,duration:wh,ease:bh,easeVarying:Mh,end:Zh,[Symbol.iterator]:qe[Symbol.iterator]};function $h(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jh={time:null,delay:0,duration:250,ease:$h};function e0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function t0(e){var t,n;e instanceof Qe?(t=e._id,e=e._name):(t=xl(),(n=jh).time=ti(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],u=l.length,a,s=0;s<u;++s)(a=l[s])&&Wn(a,e,t,s,l,n||e0(a,t));return new Qe(r,this._parents,e,t)}$t.prototype.interrupt=$c;$t.prototype.transition=t0;const or=e=>()=>e;function n0(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function r0(e){e.stopImmediatePropagation()}function lr(e){e.preventDefault(),e.stopImmediatePropagation()}var go={name:"drag"},ar={name:"space"},dt={name:"handle"},mt={name:"center"};const{abs:mo,max:we,min:ve}=Math;function po(e){return[+e[0],+e[1]]}function _o(e){return[po(e[0]),po(e[1])]}var hn={name:"x",handles:["w","e"].map(Pn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ur={name:"y",handles:["n","s"].map(Pn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ve={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},i0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},o0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Pn(e){return{type:e}}function l0(e){return!e.ctrlKey&&!e.button}function a0(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function u0(){return navigator.maxTouchPoints||"ontouchstart"in this}function sr(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function s0(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function f0(){return c0(hn)}function c0(e){var t=a0,n=l0,r=u0,i=!0,o=ei("start","brush","end"),l=6,u;function a(_){var y=_.property("__brush",p).selectAll(".overlay").data([Pn("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ve.overlay).merge(y).each(function(){var w=sr(this).extent;Xe(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),_.selectAll(".selection").data([Pn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ve.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=_.selectAll(".handle").data(e.handles,function(w){return w.type});v.exit().remove(),v.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Ve[w.type]}),_.each(s).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}a.move=function(_,y,v){_.tween?_.on("start.brush",function(w){f(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){f(this,arguments).end(w)}).tween("brush",function(){var w=this,x=w.__brush,S=f(w,arguments),k=x.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,x.extent),O=Hn(k,T);function W(F){x.selection=F===1&&T===null?null:O(F),s.call(w),S.brush()}return k!==null&&T!==null?W:W(1)}):_.each(function(){var w=this,x=arguments,S=w.__brush,k=e.input(typeof y=="function"?y.apply(w,x):y,S.extent),T=f(w,x).beforestart();Lr(w),S.selection=k===null?null:k,s.call(w),T.start(v).brush(v).end(v)})},a.clear=function(_,y){a.move(_,null,y)};function s(){var _=Xe(this),y=sr(this).selection;y?(_.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),_.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-l/2:y[0][0]-l/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-l/2:y[0][1]-l/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+l:l}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+l:l})):_.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(_,y,v){var w=_.__brush.emitter;return w&&(!v||!w.clean)?w:new c(_,y,v)}function c(_,y,v){this.that=_,this.args=y,this.state=_.__brush,this.active=0,this.clean=v}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(_,y){return this.starting?(this.starting=!1,this.emit("start",_,y)):this.emit("brush",_),this},brush:function(_,y){return this.emit("brush",_,y),this},end:function(_,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",_,y)),this},emit:function(_,y,v){var w=Xe(this.that).datum();o.call(_,this.that,new n0(_,{sourceEvent:y,target:a,selection:e.output(this.state.selection),mode:v,dispatch:o}),w)}};function h(_){if(u&&!_.touches||!n.apply(this,arguments))return;var y=this,v=_.target.__data__.type,w=(i&&_.metaKey?v="overlay":v)==="selection"?go:i&&_.altKey?mt:dt,x=e===ur?null:i0[v],S=e===hn?null:o0[v],k=sr(y),T=k.extent,O=k.selection,W=T[0][0],F,D,H=T[0][1],U,B,q=T[1][0],b,C,V=T[1][1],K,ne,Z=0,P=0,E,j=x&&S&&i&&_.shiftKey,re,ce,$=Array.from(_.touches||[_],R=>{const ee=R.identifier;return R=ao(R,y),R.point0=R.slice(),R.identifier=ee,R});Lr(y);var pe=f(y,arguments,!0).beforestart();if(v==="overlay"){O&&(E=!0);const R=[$[0],$[1]||$[0]];k.selection=O=[[F=e===ur?W:ve(R[0][0],R[1][0]),U=e===hn?H:ve(R[0][1],R[1][1])],[b=e===ur?q:we(R[0][0],R[1][0]),K=e===hn?V:we(R[0][1],R[1][1])]],$.length>1&&G(_)}else F=O[0][0],U=O[0][1],b=O[1][0],K=O[1][1];D=F,B=U,C=b,ne=K;var A=Xe(y).attr("pointer-events","none"),Y=A.selectAll(".overlay").attr("cursor",Ve[v]);if(_.touches)pe.moved=M,pe.ended=Q;else{var J=Xe(_.view).on("mousemove.brush",M,!0).on("mouseup.brush",Q,!0);i&&J.on("keydown.brush",se,!0).on("keyup.brush",de,!0),qc(_.view)}s.call(y),pe.start(_,w.name);function M(R){for(const ee of R.changedTouches||[R])for(const Ne of $)Ne.identifier===ee.identifier&&(Ne.cur=ao(ee,y));if(j&&!re&&!ce&&$.length===1){const ee=$[0];mo(ee.cur[0]-ee[0])>mo(ee.cur[1]-ee[1])?ce=!0:re=!0}for(const ee of $)ee.cur&&(ee[0]=ee.cur[0],ee[1]=ee.cur[1]);E=!0,lr(R),G(R)}function G(R){const ee=$[0],Ne=ee.point0;var Te;switch(Z=ee[0]-Ne[0],P=ee[1]-Ne[1],w){case ar:case go:{x&&(Z=we(W-F,ve(q-b,Z)),D=F+Z,C=b+Z),S&&(P=we(H-U,ve(V-K,P)),B=U+P,ne=K+P);break}case dt:{$[1]?(x&&(D=we(W,ve(q,$[0][0])),C=we(W,ve(q,$[1][0])),x=1),S&&(B=we(H,ve(V,$[0][1])),ne=we(H,ve(V,$[1][1])),S=1)):(x<0?(Z=we(W-F,ve(q-F,Z)),D=F+Z,C=b):x>0&&(Z=we(W-b,ve(q-b,Z)),D=F,C=b+Z),S<0?(P=we(H-U,ve(V-U,P)),B=U+P,ne=K):S>0&&(P=we(H-K,ve(V-K,P)),B=U,ne=K+P));break}case mt:{x&&(D=we(W,ve(q,F-Z*x)),C=we(W,ve(q,b+Z*x))),S&&(B=we(H,ve(V,U-P*S)),ne=we(H,ve(V,K+P*S)));break}}C<D&&(x*=-1,Te=F,F=b,b=Te,Te=D,D=C,C=Te,v in yo&&Y.attr("cursor",Ve[v=yo[v]])),ne<B&&(S*=-1,Te=U,U=K,K=Te,Te=B,B=ne,ne=Te,v in wo&&Y.attr("cursor",Ve[v=wo[v]])),k.selection&&(O=k.selection),re&&(D=O[0][0],C=O[1][0]),ce&&(B=O[0][1],ne=O[1][1]),(O[0][0]!==D||O[0][1]!==B||O[1][0]!==C||O[1][1]!==ne)&&(k.selection=[[D,B],[C,ne]],s.call(y),pe.brush(R,w.name))}function Q(R){if(r0(R),R.touches){if(R.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Vc(R.view,E),J.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);A.attr("pointer-events","all"),Y.attr("cursor",Ve.overlay),k.selection&&(O=k.selection),s0(O)&&(k.selection=null,s.call(y)),pe.end(R,w.name)}function se(R){switch(R.keyCode){case 16:{j=x&&S;break}case 18:{w===dt&&(x&&(b=C-Z*x,F=D+Z*x),S&&(K=ne-P*S,U=B+P*S),w=mt,G(R));break}case 32:{(w===dt||w===mt)&&(x<0?b=C-Z:x>0&&(F=D-Z),S<0?K=ne-P:S>0&&(U=B-P),w=ar,Y.attr("cursor",Ve.selection),G(R));break}default:return}lr(R)}function de(R){switch(R.keyCode){case 16:{j&&(re=ce=j=!1,G(R));break}case 18:{w===mt&&(x<0?b=C:x>0&&(F=D),S<0?K=ne:S>0&&(U=B),w=dt,G(R));break}case 32:{w===ar&&(R.altKey?(x&&(b=C-Z*x,F=D+Z*x),S&&(K=ne-P*S,U=B+P*S),w=mt):(x<0?b=C:x>0&&(F=D),S<0?K=ne:S>0&&(U=B),w=dt),Y.attr("cursor",Ve[v]),G(R));break}default:return}lr(R)}}function g(_){f(this,arguments).moved(_)}function m(_){f(this,arguments).ended(_)}function p(){var _=this.__brush||{selection:null};return _.extent=_o(t.apply(this,arguments)),_.dim=e,_}return a.extent=function(_){return arguments.length?(t=typeof _=="function"?_:or(_o(_)),a):t},a.filter=function(_){return arguments.length?(n=typeof _=="function"?_:or(!!_),a):n},a.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:or(!!_),a):r},a.handleSize=function(_){return arguments.length?(l=+_,a):l},a.keyModifiers=function(_){return arguments.length?(i=!!_,a):i},a.on=function(){var _=o.on.apply(o,arguments);return _===o?a:_},a}function h0(e){return e}var fr=1,cr=2,Ur=3,ln=4,vo=1e-6;function g0(e){return"translate("+e+",0)"}function d0(e){return"translate(0,"+e+")"}function m0(e){return t=>+e(t)}function p0(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function _0(){return!this.__axis}function y0(e,t){var n=[],r=null,i=null,o=6,l=6,u=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=e===fr||e===ln?-1:1,f=e===ln||e===cr?"x":"y",c=e===fr||e===Ur?g0:d0;function h(g){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):h0),_=Math.max(o,0)+u,y=t.range(),v=+y[0]+a,w=+y[y.length-1]+a,x=(t.bandwidth?p0:m0)(t.copy(),a),S=g.selection?g.selection():g,k=S.selectAll(".domain").data([null]),T=S.selectAll(".tick").data(m,t).order(),O=T.exit(),W=T.enter().append("g").attr("class","tick"),F=T.select("line"),D=T.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(W),F=F.merge(W.append("line").attr("stroke","currentColor").attr(f+"2",s*o)),D=D.merge(W.append("text").attr("fill","currentColor").attr(f,s*_).attr("dy",e===fr?"0em":e===Ur?"0.71em":"0.32em")),g!==S&&(k=k.transition(g),T=T.transition(g),F=F.transition(g),D=D.transition(g),O=O.transition(g).attr("opacity",vo).attr("transform",function(H){return isFinite(H=x(H))?c(H+a):this.getAttribute("transform")}),W.attr("opacity",vo).attr("transform",function(H){var U=this.parentNode.__axis;return c((U&&isFinite(U=U(H))?U:x(H))+a)})),O.remove(),k.attr("d",e===ln||e===cr?l?"M"+s*l+","+v+"H"+a+"V"+w+"H"+s*l:"M"+a+","+v+"V"+w:l?"M"+v+","+s*l+"V"+a+"H"+w+"V"+s*l:"M"+v+","+a+"H"+w),T.attr("opacity",1).attr("transform",function(H){return c(x(H)+a)}),F.attr(f+"2",s*o),D.attr(f,s*_).text(p),S.filter(_0).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===cr?"start":e===ln?"end":"middle"),S.each(function(){this.__axis=x})}return h.scale=function(g){return arguments.length?(t=g,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(o=l=+g,h):o},h.tickSizeInner=function(g){return arguments.length?(o=+g,h):o},h.tickSizeOuter=function(g){return arguments.length?(l=+g,h):l},h.tickPadding=function(g){return arguments.length?(u=+g,h):u},h.offset=function(g){return arguments.length?(a=+g,h):a},h}function w0(e){return y0(Ur,e)}function v0(e){let t;return{c(){t=X("div"),t.innerHTML="",d(t,"class","timeslider-container svelte-rv4t1k")},m(n,r){z(n,t,r),e[6](t)},p:ie,i:ie,o:ie,d(n){n&&I(t),e[6](null)}}}function b0(e,t){const n=Math.abs(t-e),r=Math.ceil(n/(1e3*60*60*24));return r>365?"monthly":r>90?"weekly":r>30?"daily":"hourly"}function bo(e){return e.toISOString().split("T")[0]}function k0(e,t,n){let{startDate:r=null}=t,{endDate:i=null}=t,{height:o=60}=t,{margin:l={top:10,right:40,bottom:30,left:40}}=t;const u=Rl();let a,s,f,c,h,g;On(()=>{if(g)return m(),()=>{}});function m(){h=g.clientWidth-l.left-l.right;const w=new Date("2022-01-01"),x=new Date("2024-12-31"),S=[];let k=new Date(w);for(;k<=x;)S.push(new Date(k)),k.setMonth(k.getMonth()+1);r||n(1,r="2022-01-01"),i||n(2,i="2024-09-31");const T=r instanceof Date?r:new Date(r),O=i instanceof Date?i:new Date(i);f=Zr().domain(ta(S)).range([0,h]),n(5,a=Xe(g).append("svg").attr("width",h+l.left+l.right).attr("height",o+l.top+l.bottom).append("g").attr("transform",`translate(${l.left},${l.top})`)),c=w0(f).tickFormat(Jr("%b %Y")).ticks(h>600?10:5),a.append("g").attr("class","x-axis").attr("transform",`translate(0,${o-l.bottom})`).call(c),a.selectAll(".x-axis path, .x-axis line").style("stroke","#000").style("shape-rendering","crispEdges"),a.selectAll(".x-axis text").style("font-size","10px").style("font-family","Avenir, sans-serif"),s=f0().extent([[0,0],[h,o-l.bottom]]).on("brush",p).on("end",_);const W=a.append("g").attr("class","brush").call(s);W.selectAll(".selection").style("fill","#000").style("fill-opacity",.3).style("stroke","#000").style("stroke-width",2),o-l.bottom,W.selectAll(".handle").style("fill","#000").style("stroke","#000").style("stroke-width",1).attr("rx",3).attr("ry",3),s.move(W,[f(T),f(O)])}function p(w){if(!w.selection)return;const[x,S]=w.selection,k=f.invert(x),T=f.invert(S);y(k,T,!1)}function _(w){if(!w.selection)return;const[x,S]=w.selection,k=f.invert(x),T=f.invert(S);y(k,T,!0)}function y(w,x,S){const k=bo(w),T=bo(x);n(1,r=k),n(2,i=T);const O=b0(w,x);S&&u("dateRangeChange",{startDate:k,endDate:T,aggregationLevel:O})}function v(w){Oe[w?"unshift":"push"](()=>{g=w,n(0,g)})}return e.$$set=w=>{"startDate"in w&&n(1,r=w.startDate),"endDate"in w&&n(2,i=w.endDate),"height"in w&&n(3,o=w.height),"margin"in w&&n(4,l=w.margin)},e.$$.update=()=>{e.$$.dirty&33&&g&&g.clientWidth>0&&a&&(Xe(g).selectAll("*").remove(),m())},[g,r,i,o,l,a,v]}class M0 extends je{constructor(t){super(),$e(this,t,k0,v0,ze,{startDate:1,endDate:2,height:3,margin:4})}}function ko(e,t,n){const r=e.slice();return r[5]=t[n].color,r[6]=t[n].key,r[7]=t[n].text,r[8]=t[n].shape!==void 0?t[n].shape:"circle",r}function Mo(e){let t,n;return{c(){t=X("h3"),n=ge(e[2]),Ke(t,"margin","5px 20px")},m(r,i){z(r,t,i),N(t,n)},p(r,i){i&4&&ye(n,r[2])},d(r){r&&I(t)}}}function Do(e){let t,n,r,i,o,l=e[7]+"",u,a,s,f,c;function h(...g){return e[3](e[6],...g)}return{c(){t=X("div"),n=X("div"),i=ae(),o=X("span"),u=ge(l),a=ae(),d(n,"class",r="color-indicator "+(e[8]==="circle"?"shape-circle":"shape-rect")+" svelte-1sge84g"),Ke(n,"background-color",e[5]),d(t,"class",s="legend-item "+(e[0]===e[6]?"selected":"")+" svelte-1sge84g")},m(g,m){z(g,t,m),N(t,n),N(t,i),N(t,o),N(o,u),N(t,a),f||(c=[Ue(t,"click",h),Ue(t,"dblclick",e[4])],f=!0)},p(g,m){e=g,m&2&&r!==(r="color-indicator "+(e[8]==="circle"?"shape-circle":"shape-rect")+" svelte-1sge84g")&&d(n,"class",r),m&2&&Ke(n,"background-color",e[5]),m&2&&l!==(l=e[7]+"")&&ye(u,l),m&3&&s!==(s="legend-item "+(e[0]===e[6]?"selected":"")+" svelte-1sge84g")&&d(t,"class",s)},d(g){g&&I(t),f=!1,Re(c)}}}function D0(e){let t,n,r=e[2]&&Mo(e),i=be(e[1]),o=[];for(let l=0;l<i.length;l+=1)o[l]=Do(ko(e,i,l));return{c(){r&&r.c(),t=ae(),n=X("div");for(let l=0;l<o.length;l+=1)o[l].c();d(n,"class","legend-container svelte-1sge84g")},m(l,u){r&&r.m(l,u),z(l,t,u),z(l,n,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(l,[u]){if(l[2]?r?r.p(l,u):(r=Mo(l),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),u&3){i=be(l[1]);let a;for(a=0;a<i.length;a+=1){const s=ko(l,i,a);o[a]?o[a].p(s,u):(o[a]=Do(s),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},i:ie,o:ie,d(l){l&&(I(t),I(n)),r&&r.d(l),nt(o,l)}}}function x0(e,t,n){let{legendData:r}=t,{title:i}=t,{clicked:o}=t;const l=(a,s)=>{s.stopImmediatePropagation(),n(0,o=a)},u=a=>{a.stopImmediatePropagation(),n(0,o=null)};return e.$$set=a=>{"legendData"in a&&n(1,r=a.legendData),"title"in a&&n(2,i=a.title),"clicked"in a&&n(0,o=a.clicked)},[o,r,i,l,u]}class hr extends je{constructor(t){super(),$e(this,t,x0,D0,ze,{legendData:1,title:2,clicked:0})}}const pt=[];function S0(e,t=ie){let n;const r=new Set;function i(u){if(ze(e,u)&&(e=u,n)){const a=!pt.length;for(const s of r)s[1](),pt.push(s,e);if(a){for(let s=0;s<pt.length;s+=2)pt[s][0](pt[s+1]);pt.length=0}}}function o(u){i(u(e))}function l(u,a=ie){const s=[u,a];return r.add(s),r.size===1&&(n=t(i,o)||ie),u(e),()=>{r.delete(s),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}function xo(e,t,n){const r=e.slice();return r[24]=t[n],r}function T0(e){let t;return{c(){t=X("div"),t.textContent="Loading...",d(t,"class","wrapper svelte-ffcqb3")},m(n,r){z(n,t,r)},p:ie,i:ie,o:ie,d(n){n&&I(t)}}}function C0(e){let t,n,r,i,o,l,u,a,s,f,c,h,g,m,p,_,y,v,w,x,S,k,T,O,W,F,D,H,U,B,q,b,C,V,K,ne,Z,P,E,j,re,ce,$,pe,A,Y,J,M=be(Nn),G=[];for(let L=0;L<M.length;L+=1)G[L]=So(xo(e,M,L));const Q=[N0,A0],se=[];function de(L,le){return L[5].length>0?0:1}O=de(e),W=se[O]=Q[O](e);const R=[F0,E0],ee=[];function Ne(L,le){return L[6].length>0?0:1}H=Ne(e),U=ee[H]=R[H](e),b=new M0({props:{startDate:e[2],endDate:e[3]}}),b.$on("dateRangeChange",e[13]);function Te(L){e[19](L)}let jt={legendData:e[11],title:"Renewables"};e[8]!==void 0&&(jt.clicked=e[8]),Z=new hr({props:jt}),Oe.push(()=>Vt(Z,"clicked",Te));function Sl(L){e[20](L)}let ii={legendData:e[10],title:"Non-renewables"};e[8]!==void 0&&(ii.clicked=e[8]),j=new hr({props:ii}),Oe.push(()=>Vt(j,"clicked",Sl));function Tl(L){e[21](L)}let oi={legendData:e[9],title:""};return e[8]!==void 0&&(oi.clicked=e[8]),$=new hr({props:oi}),Oe.push(()=>Vt($,"clicked",Tl)),{c(){t=X("div"),n=X("div"),r=X("select");for(let L=0;L<G.length;L+=1)G[L].c();i=ae(),o=X("span"),l=ae(),u=X("div"),a=X("div"),s=X("button"),f=ge("JP"),h=ae(),g=X("span"),g.textContent="|",m=ae(),p=X("button"),_=ge("English"),v=ae(),w=X("div"),x=X("button"),x.textContent="Download CSV",S=ae(),k=X("div"),T=X("div"),W.c(),F=ae(),D=X("div"),U.c(),B=ae(),q=X("div"),xe(b.$$.fragment),C=ae(),V=X("div"),K=X("div"),K.innerHTML='<span style="font-size: 0.7em; margin-left: 20px;">Click on a legend item to highlight the fuel source. Double-click on any item to un-highlight.</span>',ne=ae(),xe(Z.$$.fragment),E=ae(),xe(j.$$.fragment),ce=ae(),xe($.$$.fragment),d(r,"class","svelte-ffcqb3"),d(o,"class","caret svelte-ffcqb3"),d(n,"class","dropdown svelte-ffcqb3"),d(s,"class",c="lang-btn "+(e[4]==="jp"?"active":"")+" svelte-ffcqb3"),d(g,"class","divider svelte-ffcqb3"),d(p,"class",y="lang-btn "+(e[4]==="en"?"active":"")+" svelte-ffcqb3"),d(a,"class","language-toggle svelte-ffcqb3"),d(x,"class","download-btn svelte-ffcqb3"),d(w,"class","download-buttons svelte-ffcqb3"),d(u,"class","panel svelte-ffcqb3"),d(t,"class","header svelte-ffcqb3"),d(T,"class","left svelte-ffcqb3"),d(D,"class","right svelte-ffcqb3"),d(k,"class","wrapper svelte-ffcqb3"),d(q,"class","timeslider-wrapper svelte-ffcqb3"),Ke(V,"width","90%")},m(L,le){z(L,t,le),N(t,n),N(n,r);for(let et=0;et<G.length;et+=1)G[et]&&G[et].m(r,null);si(r,e[1]),N(n,i),N(n,o),N(t,l),N(t,u),N(u,a),N(a,s),N(s,f),N(a,h),N(a,g),N(a,m),N(a,p),N(p,_),N(u,v),N(u,w),N(w,x),z(L,S,le),z(L,k,le),N(k,T),se[O].m(T,null),N(k,F),N(k,D),ee[H].m(D,null),z(L,B,le),z(L,q,le),ke(b,q,null),z(L,C,le),z(L,V,le),N(V,K),N(V,ne),ke(Z,V,null),N(V,E),ke(j,V,null),N(V,ce),ke($,V,null),A=!0,Y||(J=[Ue(r,"change",e[12]),Ue(s,"click",e[16]),Ue(p,"click",e[17]),Ue(x,"click",e[18])],Y=!0)},p(L,le){if(le&16){M=be(Nn);let Ce;for(Ce=0;Ce<M.length;Ce+=1){const li=xo(L,M,Ce);G[Ce]?G[Ce].p(li,le):(G[Ce]=So(li),G[Ce].c(),G[Ce].m(r,null))}for(;Ce<G.length;Ce+=1)G[Ce].d(1);G.length=M.length}(!A||le&2)&&si(r,L[1]),(!A||le&16&&c!==(c="lang-btn "+(L[4]==="jp"?"active":"")+" svelte-ffcqb3"))&&d(s,"class",c),(!A||le&16&&y!==(y="lang-btn "+(L[4]==="en"?"active":"")+" svelte-ffcqb3"))&&d(p,"class",y);let et=O;O=de(L),O===et?se[O].p(L,le):(kt(),fe(se[et],1,1,()=>{se[et]=null}),Mt(),W=se[O],W?W.p(L,le):(W=se[O]=Q[O](L),W.c()),oe(W,1),W.m(T,null));let qn=H;H=Ne(L),H===qn?ee[H].p(L,le):(kt(),fe(ee[qn],1,1,()=>{ee[qn]=null}),Mt(),U=ee[H],U?U.p(L,le):(U=ee[H]=R[H](L),U.c()),oe(U,1),U.m(D,null));const Vn={};le&4&&(Vn.startDate=L[2]),le&8&&(Vn.endDate=L[3]),b.$set(Vn);const Xn={};le&2048&&(Xn.legendData=L[11]),!P&&le&256&&(P=!0,Xn.clicked=L[8],qt(()=>P=!1)),Z.$set(Xn);const Bn={};le&1024&&(Bn.legendData=L[10]),!re&&le&256&&(re=!0,Bn.clicked=L[8],qt(()=>re=!1)),j.$set(Bn);const Gn={};le&512&&(Gn.legendData=L[9]),!pe&&le&256&&(pe=!0,Gn.clicked=L[8],qt(()=>pe=!1)),$.$set(Gn)},i(L){A||(oe(W),oe(U),oe(b.$$.fragment,L),oe(Z.$$.fragment,L),oe(j.$$.fragment,L),oe($.$$.fragment,L),A=!0)},o(L){fe(W),fe(U),fe(b.$$.fragment,L),fe(Z.$$.fragment,L),fe(j.$$.fragment,L),fe($.$$.fragment,L),A=!1},d(L){L&&(I(t),I(S),I(k),I(B),I(q),I(C),I(V)),nt(G,L),se[O].d(),ee[H].d(),Me(b),Me(Z),Me(j),Me($),Y=!1,Re(J)}}}function So(e){let t,n=(Ye[e[4]][e[24]]||e[24])+"",r;return{c(){t=X("option"),r=ge(n),t.__value=e[24],Ul(t,t.__value)},m(i,o){z(i,t,o),N(t,r)},p(i,o){o&16&&n!==(n=(Ye[i[4]][i[24]]||i[24])+"")&&ye(r,n)},d(i){i&&I(t)}}}function A0(e){let t;return{c(){t=X("div"),t.textContent="Loading..."},m(n,r){z(n,t,r)},p:ie,i:ie,o:ie,d(n){n&&I(t)}}}function N0(e){let t,n;return t=new nf({props:{data:e[5],aggregationLevel:e[7],clickedItem:e[8],currentLang:e[4]}}),{c(){xe(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i&32&&(o.data=r[5]),i&128&&(o.aggregationLevel=r[7]),i&256&&(o.clickedItem=r[8]),i&16&&(o.currentLang=r[4]),t.$set(o)},i(r){n||(oe(t.$$.fragment,r),n=!0)},o(r){fe(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function E0(e){let t;return{c(){t=X("div"),t.textContent="Loading..."},m(n,r){z(n,t,r)},p:ie,i:ie,o:ie,d(n){n&&I(t)}}}function F0(e){let t,n;return t=new lf({props:{data:e[6],currentLang:e[4]}}),{c(){xe(t.$$.fragment)},m(r,i){ke(t,r,i),n=!0},p(r,i){const o={};i&64&&(o.data=r[6]),i&16&&(o.currentLang=r[4]),t.$set(o)},i(r){n||(oe(t.$$.fragment,r),n=!0)},o(r){fe(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function L0(e){let t,n,r,i;const o=[C0,T0],l=[];function u(a,s){return a[6].length>0?0:1}return n=u(e),r=l[n]=o[n](e),{c(){t=X("main"),r.c(),d(t,"class","svelte-ffcqb3")},m(a,s){z(a,t,s),l[n].m(t,null),i=!0},p(a,[s]){let f=n;n=u(a),n===f?l[n].p(a,s):(kt(),fe(l[f],1,1,()=>{l[f]=null}),Mt(),r=l[n],r?r.p(a,s):(r=l[n]=o[n](a),r.c()),oe(r,1),r.m(t,null))},i(a){i||(oe(r),i=!0)},o(a){fe(r),i=!1},d(a){a&&I(t),l[n].d()}}}function To(e,t){const n=U0(e),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function U0(e){if(!e||e.length===0)return"";const t=Object.keys(e[0]);let n=t.join(",")+`
`;return e.forEach(r=>{const i=t.map(o=>{let l=r[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes('"')||l.includes(`
`))&&(l=`"${l}"`)),l}).join(",");n+=i+`
`}),n}function P0(e,t,n){let r,i,o,l;const u=S0("jp");let a=[],s=[],f="japan",c="2024-04-01",h="2024-04-15",g="hourly",m=[],p,_;u.subscribe(D=>{n(4,_=D)});async function y(){try{const D=new URLSearchParams({start_date:c,end_date:h,region:f,aggregation:g}),H={}.VITE_API_BASE_URL,B=await(await fetch(`${H}/api/data?${D}`)).json();n(5,a=JSON.parse(B.type.daily)),n(6,s=JSON.parse(B.categorized.monthly)),Nn.length>0&&!f&&n(1,f=Nn[0]),a.length>0&&(m=a.map(q=>new Date(q.date)),m.sort((q,b)=>q-b))}catch(D){console.error("Error fetching data:",D)}finally{}}On(y);function v(D){n(1,f=D.target.value)}function w(D){const{startDate:H,endDate:U,aggregationLevel:B}=D.detail;n(2,c=H),n(3,h=U),n(7,g=B),console.log(`Date range changed: ${c} to ${h} with aggregation: ${g}`)}function x(D){a.length>0&&To(a,`${f}_daily_${c}_to_${h}.csv`),s.length>0&&To(s,`${f}_monthly_data.csv`)}const S=()=>u.set("jp"),k=()=>u.set("en"),T=()=>x();function O(D){p=D,n(8,p)}function W(D){p=D,n(8,p)}function F(D){p=D,n(8,p)}return e.$$.update=()=>{e.$$.dirty&16&&n(15,r=Object.entries(Sr).map(([D,H])=>({color:H,shape:D==="demand"||D==="spot_price"?"rect":"circle",text:Ye[_][D]||D,key:D}))),e.$$.dirty&32768&&n(11,i=r.filter(D=>qs.indexOf(D.key)!==-1)),e.$$.dirty&32768&&n(10,o=r.filter(D=>Vs.indexOf(D.key)!==-1)),e.$$.dirty&32768&&n(9,l=r.filter(D=>Xs.indexOf(D.key)!==-1)),e.$$.dirty&14&&(f||c||h)&&y()},[u,f,c,h,_,a,s,g,p,l,o,i,v,w,x,r,S,k,T,O,W,F]}class Y0 extends je{constructor(t){super(),$e(this,t,P0,L0,ze,{currentLanguage:0})}get currentLanguage(){return this.$$.ctx[0]}}new Y0({target:document.getElementById("app")});
